{"version":3,"sources":["assets\\lcc-ui-sorting-group\\engine-extend\\node.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\n//@ts-ignore\r\nconst nodeMemPool = require('./trans-pool/index').NodeMemPool\r\n\r\ndeclare module cc {\r\n    export interface Node {\r\n        \r\n        /**\r\n         * 排序优先级 - private\r\n         */\r\n        _sortingPriority:number;\r\n\r\n        /**\r\n         * 排序优先级\r\n         */\r\n        sortingPriority:number;\r\n\r\n        /**\r\n         * 排序优使能 - private\r\n         */\r\n        _sortingEnabled:boolean;\r\n\r\n        /**\r\n         * 排序优使能\r\n         */\r\n        sortingEnabled:boolean;\r\n    }\r\n}\r\n\r\nif(!('sortingPriority' in cc.Node.prototype)){\r\n    Object.defineProperty(cc.Node.prototype, 'sortingPriority', {\r\n        get: function() { \r\n            return this._sortingPriority; \r\n        },\r\n        set: function(value) { \r\n            this._sortingPriority = value;\r\n            // console.log(`sortingPriority ${this.name} ${value}`);\r\n            if(CC_JSB){\r\n                this._sortingPriorityProxy[0] = value;\r\n            }\r\n        },\r\n        enumerable: true\r\n    });\r\n\r\n    Object.defineProperty(cc.Node.prototype, 'sortingEnabled', {\r\n        get: function() { \r\n            return this._sortingEnabled; \r\n        },\r\n        set: function(value) { \r\n            this._sortingEnabled = value;\r\n            // console.log(`sortingEnabled ${this.name} ${value}`);\r\n            if(CC_JSB){\r\n                this._sortingEnabledProxy[0] = value ? 1 : 0;\r\n            }\r\n        },\r\n        enumerable: true\r\n    });\r\n}\r\n\r\nif(CC_JSB){\r\n    //@ts-ignore\r\n    cc.Node.prototype._initDataFromPool = function(){\r\n        if (!this._spaceInfo) {\r\n            if (CC_EDITOR || CC_TEST) {\r\n                this._spaceInfo = {\r\n                    trs: new Float64Array(10),\r\n                    localMat: new Float64Array(16),\r\n                    worldMat: new Float64Array(16),\r\n                };\r\n            } else {\r\n                this._spaceInfo = nodeMemPool.pop();\r\n            }\r\n        }\r\n\r\n        let spaceInfo = this._spaceInfo;\r\n        this._matrix = cc.mat4(spaceInfo.localMat);\r\n        cc.Mat4.identity(this._matrix);\r\n        this._worldMatrix = cc.mat4(spaceInfo.worldMat);\r\n        cc.Mat4.identity(this._worldMatrix);\r\n        this._localMatDirty = 0xffff;\r\n        this._worldMatDirty = true;\r\n        this._sortingPriorityProxy = spaceInfo.sortingPriority;\r\n        this._sortingEnabledProxy = spaceInfo.sortingEnabled;\r\n\r\n        let trs = this._trs = spaceInfo.trs;\r\n        trs[0] = 0; // position.x\r\n        trs[1] = 0; // position.y\r\n        trs[2] = 0; // position.z\r\n        trs[3] = 0; // rotation.x\r\n        trs[4] = 0; // rotation.y\r\n        trs[5] = 0; // rotation.z\r\n        trs[6] = 1; // rotation.w\r\n        trs[7] = 1; // scale.x\r\n        trs[8] = 1; // scale.y\r\n        trs[9] = 1; // scale.z\r\n    }\r\n\r\n    //@ts-ignore\r\n    cc.Node.prototype._backDataIntoPool = function() {\r\n        if (!(CC_EDITOR || CC_TEST)) {\r\n            // push back to pool\r\n            nodeMemPool.push(this._spaceInfo);\r\n            this._sortingPriorityProxy = null;\r\n            this._sortingEnabledProxy = null;\r\n            this._matrix = null;\r\n            this._worldMatrix = null;\r\n            this._trs = null;\r\n            this._spaceInfo = null;\r\n        }\r\n    }\r\n}\r\n"]}