{"version":3,"sources":["assets\\src\\gobang\\GobangScene.ts"],"names":[],"mappings":";;;;;;AAAA,6CAA4C;AAC5C,qDAAuD;AACvD,uCAAsC;AACtC,0BAAyB;AACnB,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAiC,+BAAY;IAA7C;QAAA,qEAiFC;QA9EW,WAAK,GAAgB,IAAI,CAAC;QAE1B,QAAE,GAAa,IAAI,CAAC;QACpB,WAAK,GAAG,sBAAI,CAAC;;IA2EzB,CAAC;IAzEG,2BAAK,GAAL;QACI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtB,IAAI,CAAC,EAAE,GAAG,IAAI,mBAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACnC,IAAI,CAAC,SAAS,EAAE,CAAC;IACrB,CAAC;IAED,+BAAS,GAAT;QACI,IAAI,CAAC,KAAK,GAAG,uBAAK,CAAC;QACnB,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACnB,KAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;IAClC,CAAC;IAED,8BAAQ,GAAR;QACI,IAAG,IAAI,CAAC,KAAK,KAAK,uBAAK,EAAE;YACrB,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACd,IAAI,CAAC,KAAK,GAAG,sBAAI,CAAC;YAClB,KAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,WAAW,EAClC,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE,cAAQ,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;SACvD;aAAK,IAAG,IAAI,CAAC,KAAK,KAAK,uBAAK,EAAE;YAC3B,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACd,KAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,YAAY,EACvC,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,cAAQ,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,EAC5C,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,cAAQ,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;YAC9C,IAAI,CAAC,KAAK,GAAG,sBAAI,CAAC;SACrB;IACL,CAAC;IAED,iCAAW,GAAX;QACI,KAAC,CAAC,UAAU,EAAE,CAAC;IACnB,CAAC;IAED,kCAAY,GAAZ;QACI,IAAI,CAAC,SAAS,EAAE,CAAC;IACrB,CAAC;IAED,oCAAc,GAAd,UAAe,IAAa;QAA5B,iBAoCC;QAnCG,QAAQ,IAAI,CAAC,KAAK,EAAE;YAChB,KAAK,sBAAI;gBAET,MAAM;YACN,KAAK,uBAAK;gBACN,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;gBAC5C,IAAI,KAAK,CAAC,KAAK,KAAK,sBAAI,EAAE;oBACtB,KAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;oBAClC,OAAO;iBACV;gBACD,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;gBAC5B,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE;oBACvB,IAAI,CAAC,QAAQ,EAAE,CAAC;iBACnB;qBAAM;oBACH,IAAI,CAAC,KAAK,GAAG,uBAAK,CAAC;oBACnB,IAAI,CAAC,YAAY,CAAC;wBACd,KAAI,CAAC,KAAK,CAAC,UAAU,CAAC,KAAI,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC;wBAC7C,IAAI,KAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE;4BACvB,KAAI,CAAC,QAAQ,EAAE,CAAC;yBACnB;6BAAM;4BACH,KAAI,CAAC,KAAK,GAAG,uBAAK,CAAC;yBACtB;oBACL,CAAC,EAAE,CAAC,CAAC,CAAC;iBACT;gBACD,MAAM;YACV,KAAK,uBAAK;gBACN,+BAA+B;gBAC/B,8BAA8B;gBAC9B,qBAAqB;gBACrB,UAAU;gBACV,0BAA0B;gBAC1B,IAAI;gBACJ,MAAM;YACV,OAAO,CAAC,CAAC,MAAM;SAClB;IACL,CAAC;IA5ED;QADC,QAAQ,CAAC,yBAAW,CAAC;8CACY;IAHzB,WAAW;QADvB,OAAO;OACK,WAAW,CAiFvB;IAAD,kBAAC;CAjFD,AAiFC,CAjFgC,EAAE,CAAC,SAAS,GAiF5C;AAjFY,kCAAW","file":"","sourceRoot":"/","sourcesContent":["import { GobangBoard } from \"./GobangBoard\";\r\nimport { NONE, BLACK, WHITE } from \"./GobangConstants\";\r\nimport { GobangAI } from \"./GobangAI\";\r\nimport { G } from \"../G\";\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class GobangScene extends cc.Component {\r\n\r\n    @property(GobangBoard)\r\n    private board: GobangBoard = null;\r\n\r\n    private ai: GobangAI = null;\r\n    private state = NONE;\r\n\r\n    start() {\r\n        this.board.init(this);\r\n        this.ai = new GobangAI(this.board);\r\n        this.startGame();\r\n    }\r\n\r\n    startGame() {\r\n        this.state = BLACK;\r\n        this.board.reset();\r\n        G.gameRoot.showTip(\"你是黑棋你先走\");\r\n    }\r\n\r\n    overGame() {\r\n        if(this.state === BLACK) {\r\n            cc.log(\"黑棋胜\");\r\n            this.state = NONE;\r\n            G.gameRoot.showMaskMessage(\"你赢了阿尔法二狗！\",\r\n                { label: \"朕知道了\", cb: () => { }, target: this });\r\n        }else if(this.state === WHITE) {\r\n            cc.log(\"白旗胜\");\r\n            G.gameRoot.showMaskMessage(\"你输给了阿尔法二狗！\",\r\n            { label: \"服了\", cb: () => { }, target: this },\r\n            { label: \"不服\", cb: () => { }, target: this });\r\n            this.state = NONE;\r\n        }\r\n    }\r\n\r\n    onBtnReturn() {\r\n        G.returnHall();\r\n    }\r\n\r\n    onBtnRestart() {\r\n        this.startGame();\r\n    }\r\n\r\n    onBoardTouched(coor: cc.Vec2) {\r\n        switch (this.state) {\r\n            case NONE:\r\n            \r\n            break;\r\n            case BLACK:\r\n                let piece = this.board.getPieceByCoor(coor);\r\n                if (piece.color !== NONE) {\r\n                    G.gameRoot.showTip(\"这里有子了，你是不是傻\");\r\n                    return;\r\n                }\r\n                this.board.placeBlack(coor);\r\n                if (this.board.judgeWin()) {\r\n                    this.overGame();\r\n                } else {\r\n                    this.state = WHITE;\r\n                    this.scheduleOnce(() => {\r\n                        this.board.placeWhite(this.ai.getNextCoor());\r\n                        if (this.board.judgeWin()) {\r\n                            this.overGame();\r\n                        } else {\r\n                            this.state = BLACK;\r\n                        }\r\n                    }, 1);\r\n                }\r\n                break;\r\n            case WHITE:\r\n                // this.board.placeWhite(coor);\r\n                // if(this.board.judgeWin()) {\r\n                //     cc.log(\"白棋胜\");\r\n                // }else {\r\n                //     this.state = BLACK;\r\n                // }\r\n                break;\r\n            default: break;\r\n        }\r\n    }\r\n\r\n}\r\n"]}