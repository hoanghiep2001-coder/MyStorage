{"version":3,"sources":["assets\\Script\\Others\\Portal.js"],"names":["GameInfo","require","Player3D","cc","Class","Component","properties","StoneCover","Node","onLoad","_isOpen","start","update","dt","TotalEnemyAlive","openDoor","active","onCollisionEnter","other","self","node","group","playerEnterPortal","playerNode","console","log","getComponent","win"],"mappings":";;;;;;AAAA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAtB;;AAEAE,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAEJ,EAAE,CAACK;AADP,GAHP;AAOL;AAEAC,EAAAA,MATK,oBASK;AACN,SAAKC,OAAL,GAAe,KAAf;AACH,GAXI;AAaLC,EAAAA,KAbK,mBAaI,CAER,CAfI;AAiBLC,EAAAA,MAjBK,kBAiBGC,EAjBH,EAiBO;AACR,QAAG,KAAKH,OAAR,EAAiB;;AAEjB,QAAGV,QAAQ,CAACc,eAAT,IAA4B,CAA/B,EAAiC;AAC7B,WAAKJ,OAAL,GAAe,IAAf;AACA,WAAKK,QAAL;AACH;AACJ,GAxBI;AA0BLA,EAAAA,QA1BK,sBA0BK;AACN,SAAKR,UAAL,CAAgBS,MAAhB,GAAyB,KAAzB;AACH,GA5BI;AA8BLC,EAAAA,gBAAgB,EAAE,0BAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AACrC,QAAGD,KAAK,CAACE,IAAN,CAAWC,KAAX,IAAoB,QAAvB,EAAgC;AAC5B,WAAKC,iBAAL,CAAuBJ,KAAvB;AACH;AACJ,GAlCI;AAoCLI,EAAAA,iBApCK,6BAoCaC,UApCb,EAoCwB;AACzBC,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAyBzB,QAAQ,CAACc,eAA9C;;AACA,QAAGd,QAAQ,CAACc,eAAT,GAA2B,CAA9B,EAAgC;AAC5BU,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACH,KAFD,MAEO;AACHD,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EADG,CAEH;;AACAF,MAAAA,UAAU,CAACG,YAAX,CAAwBxB,QAAxB,EAAkCyB,GAAlC;AACH;AACJ;AA7CI,CAAT","sourceRoot":"/","sourcesContent":["const GameInfo = require(\"GameInfo\");\r\nvar Player3D = require(\"Player3D\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        StoneCover: cc.Node\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this._isOpen = false;\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        if(this._isOpen) return;\r\n\r\n        if(GameInfo.TotalEnemyAlive <= 0){\r\n            this._isOpen = true;\r\n            this.openDoor();\r\n        }\r\n    },\r\n\r\n    openDoor(){\r\n        this.StoneCover.active = false;\r\n    },\r\n\r\n    onCollisionEnter: function (other, self) {\r\n        if(other.node.group == \"Player\"){\r\n            this.playerEnterPortal(other);\r\n        }\r\n    },\r\n\r\n    playerEnterPortal(playerNode){\r\n        console.log(\"Player Enter Portal \" + GameInfo.TotalEnemyAlive);\r\n        if(GameInfo.TotalEnemyAlive > 0){\r\n            console.log(\"You need kill more enemy!\");\r\n        } else {\r\n            console.log(\"YOU WIN\");\r\n            // Show End of Game\r\n            playerNode.getComponent(Player3D).win();\r\n        }\r\n    }\r\n});\r\n"]}