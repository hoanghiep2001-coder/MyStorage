{"version":3,"sources":["assets\\Script\\Character\\HealthBar.js"],"names":["cc","Class","Component","properties","FillSprite","Sprite","HealthText","type","Label","serializable","onLoad","start","update","dt","init","hp","_maxHP","_currentHP","fillStart","fillRange","updateHealthText","setHP","tween","to","decrement","damp","currentHp","string","isAlive"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAEJ,EAAE,CAACK,MADP;AAERC,IAAAA,UAAU,EAAE;AACR,iBAAS,IADD;AAERC,MAAAA,IAAI,EAAEP,EAAE,CAACQ,KAFD;AAGRC,MAAAA,YAAY,EAAE;AAHN;AAFJ,GAHP;AAYL;AAEAC,EAAAA,MAdK,oBAcK,CACN;AACA;AACH,GAjBI;AAmBLC,EAAAA,KAnBK,mBAmBI,CAER,CArBI;AAuBLC,EAAAA,MAvBK,kBAuBGC,EAvBH,EAuBO,CACR;AACH,GAzBI;AA2BLC,EAAAA,IA3BK,gBA2BAC,EA3BA,EA2BG;AACJ,SAAKC,MAAL,GAAcD,EAAd;AACA,SAAKE,UAAL,GAAkBF,EAAlB;AAEA,SAAKX,UAAL,CAAgBc,SAAhB,GAA4B,CAA5B;AACA,SAAKd,UAAL,CAAgBe,SAAhB,GAA4B,CAAC,CAA7B;AAEA,SAAKC,gBAAL;AACH,GAnCI;AAqCLC,EAAAA,KArCK,iBAqCCN,EArCD,EAqCI;AACL,SAAKE,UAAL,GAAkBF,EAAlB,CADK,CAGL;;AACAf,IAAAA,EAAE,CAACsB,KAAH,CAAS,KAAKlB,UAAd,EACCmB,EADD,CACK,IADL,EACW;AAACL,MAAAA,SAAS,EAAE,KAAKD,UAAL,GAAkB,KAAKD;AAAnC,KADX,EAECL,KAFD;AAIA,SAAKS,gBAAL;AACH,GA9CI;AAgDLI,EAAAA,SAhDK,qBAgDKC,IAhDL,EAgDU;AACX,QAAIC,SAAS,GAAG,KAAKT,UAAL,GAAkBQ,IAAlC;AACA,QAAGC,SAAS,GAAG,CAAf,EAAkBA,SAAS,GAAG,CAAZ;AAClB,SAAKL,KAAL,CAAWK,SAAX;AACH,GApDI;AAsDLN,EAAAA,gBAtDK,8BAsDa;AACd,QAAG,KAAKd,UAAL,IAAmB,IAAtB,EAA4B;AAC5B,SAAKA,UAAL,CAAgBqB,MAAhB,GAA0B,KAAKV,UAAN,GAAoB,GAApB,GAA2B,KAAKD,MAAzD;AACH,GAzDI;AA2DLY,EAAAA,OA3DK,qBA2DI;AACL,WAAO,KAAKX,UAAL,GAAkB,CAAzB;AACH;AA7DI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        FillSprite: cc.Sprite,\r\n        HealthText: {\r\n            default: null,\r\n            type: cc.Label,\r\n            serializable: true,\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        // this._maxHP = 0;\r\n        // this._currentHP = 0;\r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n    update (dt) {\r\n        // this.updateHealthText();\r\n    },\r\n\r\n    init(hp){\r\n        this._maxHP = hp;\r\n        this._currentHP = hp;\r\n\r\n        this.FillSprite.fillStart = 1;\r\n        this.FillSprite.fillRange = -1;\r\n\r\n        this.updateHealthText();\r\n    },\r\n\r\n    setHP(hp){\r\n        this._currentHP = hp;\r\n\r\n        // this.FillSprite.fillStart = this._currentHP / this._maxHP;\r\n        cc.tween(this.FillSprite)\r\n        .to (0.25, {fillStart: this._currentHP / this._maxHP})\r\n        .start();\r\n\r\n        this.updateHealthText();\r\n    },\r\n\r\n    decrement(damp){\r\n        let currentHp = this._currentHP - damp;\r\n        if(currentHp < 0) currentHp = 0;\r\n        this.setHP(currentHp);\r\n    },\r\n\r\n    updateHealthText(){\r\n        if(this.HealthText == null) return;\r\n        this.HealthText.string = (this._currentHP) + \"/\" + (this._maxHP);\r\n    },\r\n\r\n    isAlive(){\r\n        return this._currentHP > 0;\r\n    }\r\n    \r\n});\r\n"]}