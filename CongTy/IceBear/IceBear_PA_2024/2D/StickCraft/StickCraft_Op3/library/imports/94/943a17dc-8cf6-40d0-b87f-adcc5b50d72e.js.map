{"version":3,"sources":["assets\\Script\\Controllers\\UIGameController.js"],"names":["CONST","require","GameInfo","cc","Class","Component","properties","FollowCamera","Node","ButtonMoveLeft","type","Button","serializable","ButtonMoveRight","ButtonAttack","ButtonJump","ButtonDash","ButtonWeaponSword","ButtonWeaponArcher","EnemyLiveText","Label","StickLifeText","HandTutorialSword","HandTutorialArcher","MessageText","TempWall","InstallPopup","onLoad","TotalEnemy","TotalEnemyInGame","TotalEnemyAlive","_tutorialDoneStage1Called","_tutorialStartStage2Called","_tutorialDoneStage2Called","_isShowedPopupInstall","GamePause","scheduleOnce","view","getFrameSize","width","height","start","active","update","dt","node","setPosition","getPosition","string","TutorialStartStage2","NumEnemyForStartStage2","TutorialDoneStage1","callWhenStage1Done","callWhenStage2Start","TutorialDoneStage2","callWhenStage2Done","IsShowPopupInstall","showPopupInstall","log"],"mappings":"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","sourceRoot":"/","sourcesContent":["const CONST = require(\"CONST\");\r\nconst GameInfo = require(\"GameInfo\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        FollowCamera: cc.Node,\r\n\r\n        // Btn Move\r\n        ButtonMoveLeft: {\r\n            default: null,\r\n            type: cc.Button,\r\n            serializable: true,\r\n        },\r\n        ButtonMoveRight: {\r\n            default: null,\r\n            type: cc.Button,\r\n            serializable: true,\r\n        },\r\n        // Btn Attack\r\n        ButtonAttack: {\r\n            default: null,\r\n            type: cc.Button,\r\n            serializable: true,\r\n        },\r\n        ButtonJump: {\r\n            default: null,\r\n            type: cc.Button,\r\n            serializable: true,\r\n        },\r\n        ButtonDash: {\r\n            default: null,\r\n            type: cc.Button,\r\n            serializable: true,\r\n        },\r\n        \r\n        // Button Weapon\r\n        ButtonWeaponSword: {\r\n            default: null,\r\n            type: cc.Button,\r\n            serializable: true,\r\n        },\r\n        ButtonWeaponArcher: {\r\n            default: null,\r\n            type: cc.Button,\r\n            serializable: true,\r\n        },\r\n\r\n        // Info\r\n        EnemyLiveText: {\r\n            default: null,\r\n            type: cc.Label,\r\n            serializable: true,\r\n        },\r\n        StickLifeText: {\r\n            default: null,\r\n            type: cc.Label,\r\n            serializable: true,\r\n        },\r\n\r\n        HandTutorialSword: cc.Node,\r\n        HandTutorialArcher: cc.Node,\r\n\r\n        MessageText: cc.Label,\r\n\r\n        TempWall: cc.Node,\r\n\r\n        InstallPopup: cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        GameInfo.TotalEnemy = CONST.TotalEnemyInGame;\r\n        GameInfo.TotalEnemyAlive = GameInfo.TotalEnemy;\r\n\r\n        this._tutorialDoneStage1Called = false;\r\n        this._tutorialStartStage2Called = false;\r\n        this._tutorialDoneStage2Called = false;\r\n\r\n        this._isShowedPopupInstall = false;\r\n\r\n        GameInfo.GamePause = true;\r\n\r\n        this.scheduleOnce(function() {\r\n            if(cc.view.getFrameSize().width > cc.view.getFrameSize().height){\r\n                GameInfo.GamePause = false;\r\n            } else {\r\n                GameInfo.GamePause = true;\r\n            }\r\n        }, 3);\r\n    },\r\n\r\n    start () {\r\n        this.InstallPopup.active = false;\r\n    },\r\n\r\n    update (dt) {\r\n        this.node.setPosition(this.FollowCamera.getPosition());\r\n\r\n        this.EnemyLiveText.string = (GameInfo.TotalEnemy - GameInfo.TotalEnemyAlive) + \"/\" + GameInfo.TotalEnemy;\r\n\r\n        if(!GameInfo.TutorialStartStage2){\r\n            if(GameInfo.TotalEnemy - GameInfo.TotalEnemyAlive >= CONST.NumEnemyForStartStage2){\r\n                GameInfo.TutorialStartStage2 = true;\r\n            }\r\n        }\r\n\r\n        if(!this._tutorialDoneStage1Called && GameInfo.TutorialDoneStage1){\r\n            this._tutorialDoneStage1Called = true;\r\n            this.callWhenStage1Done();\r\n        }\r\n\r\n        if(!this._tutorialStartStage2Called && GameInfo.TutorialStartStage2){\r\n            this._tutorialStartStage2Called = true;\r\n            this.callWhenStage2Start();\r\n        }\r\n\r\n        // cc.log(GameInfo.TutorialDoneStage2);\r\n        if(!this._tutorialDoneStage2Called && GameInfo.TutorialDoneStage2){\r\n            this._tutorialDoneStage2Called = true;\r\n            this.callWhenStage2Done();\r\n        }\r\n\r\n        if(!this._isShowedPopupInstall && GameInfo.IsShowPopupInstall){\r\n            this._isShowedPopupInstall = true;\r\n            this.showPopupInstall();\r\n        }\r\n    },\r\n\r\n    callWhenStage1Done(){\r\n        cc.log(\"Stage 1 Done\");\r\n        this.MessageText.node.active = false;\r\n    },\r\n\r\n    callWhenStage2Start(){\r\n        cc.log(\"Stage 2 Start\");\r\n        this.TempWall.active = false;\r\n\r\n        this.MessageText.node.active = true;\r\n        this.MessageText.string = \"CHANGE YOUR WEAPON!\";\r\n\r\n        // GameInfo.GamePause = true;\r\n\r\n        // this.scheduleOnce(function() {\r\n        //     GameInfo.GamePause = false;\r\n        // }, 3);\r\n    },\r\n\r\n    callWhenStage2Done(){\r\n        cc.log(\"Stage 2 Done\");\r\n        this.MessageText.node.active = false;\r\n    },\r\n\r\n    showPopupInstall(){\r\n        this.InstallPopup.active = true;\r\n        this.InstallPopup.setPosition(0, 0);\r\n    }\r\n});\r\n"]}