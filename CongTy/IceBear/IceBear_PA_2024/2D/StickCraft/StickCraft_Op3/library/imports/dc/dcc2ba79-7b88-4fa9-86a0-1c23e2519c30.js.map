{"version":3,"sources":["assets\\Script\\Others\\DropItem.js"],"names":["Player3D","require","GameInfo","EnWeapon","cc","Class","Component","properties","weaponType","None","type","weaponIcon","Sprite","serializable","onLoad","start","tween","node","repeatForever","to","position","v2","onCollisionEnter","other","self","group","collectWeapon","getComponent","player","console","log","changeWeapon","Sword","TutorialDoneStage1","Archer","TutorialDoneStage2","destroy"],"mappings":";;;;;;AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAtB;;AACA,IAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAxB;;AACA,IAAIE,QAAQ,GAAGF,OAAO,CAAC,UAAD,CAAP,CAAoBE,QAAnC;;AAEAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAE;AACR,iBAASL,QAAQ,CAACM,IADV;AAERC,MAAAA,IAAI,EAAEP;AAFE,KADJ;AAKRQ,IAAAA,UAAU,EAAE;AACR,iBAAS,IADD;AAERD,MAAAA,IAAI,EAAEN,EAAE,CAACQ,MAFD;AAGRC,MAAAA,YAAY,EAAE;AAHN;AALJ,GAHP;AAeLC,EAAAA,MAfK,oBAeK,CAAE,CAfP;AAiBLC,EAAAA,KAjBK,mBAiBI;AACLX,IAAAA,EAAE,CAACY,KAAH,CAAS,KAAKL,UAAL,CAAgBM,IAAzB,EACCC,aADD,CAEId,EAAE,CAACY,KAAH,GAAWG,EAAX,CAAc,CAAd,EAAiB;AAACC,MAAAA,QAAQ,EAAGhB,EAAE,CAACiB,EAAH,CAAM,CAAN,EAAS,CAAT;AAAZ,KAAjB,EACCF,EADD,CACI,CADJ,EACO;AAACC,MAAAA,QAAQ,EAAGhB,EAAE,CAACiB,EAAH,CAAM,CAAN,EAAS,CAAT;AAAZ,KADP,CAFJ,EAICN,KAJD;AAKH,GAvBI;AAyBL;AAEAO,EAAAA,gBAAgB,EAAE,0BAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AACrC,QAAGD,KAAK,CAACN,IAAN,CAAWQ,KAAX,IAAoB,QAAvB,EAAgC;AAC5B,WAAKC,aAAL,CAAmBH,KAAK,CAACN,IAAN,CAAWU,YAAX,CAAwB3B,QAAxB,CAAnB;AACH;AACJ,GA/BI;AAiCL0B,EAAAA,aAjCK,yBAiCSE,MAjCT,EAiCgB;AACjBC,IAAAA,OAAO,CAACC,GAAR,CAAY,4BAA4B,KAAKtB,UAA7C;AACAoB,IAAAA,MAAM,CAACG,YAAP,CAAoB,KAAKvB,UAAzB;;AAEA,QAAG,KAAKA,UAAL,IAAmBL,QAAQ,CAAC6B,KAA/B,EAAqC;AACjC9B,MAAAA,QAAQ,CAAC+B,kBAAT,GAA8B,IAA9B;AACH;;AAED,QAAG,KAAKzB,UAAL,IAAmBL,QAAQ,CAAC+B,MAA/B,EAAsC;AAClChC,MAAAA,QAAQ,CAACiC,kBAAT,GAA8B,IAA9B;AACH;;AAED,SAAKlB,IAAL,CAAUmB,OAAV;AACH;AA9CI,CAAT","sourceRoot":"/","sourcesContent":["var Player3D = require(\"Player3D\");\r\nconst GameInfo = require(\"GameInfo\");\r\nvar EnWeapon = require(\"GameEnum\").EnWeapon;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        weaponType: {\r\n            default: EnWeapon.None,\r\n            type: EnWeapon,\r\n        },\r\n        weaponIcon: {\r\n            default: null,       \r\n            type: cc.Sprite,\r\n            serializable: true, \r\n        },\r\n    },\r\n\r\n    onLoad () {},\r\n\r\n    start () {\r\n        cc.tween(this.weaponIcon.node)\r\n        .repeatForever(\r\n            cc.tween().to(1, {position : cc.v2(0, 7)})\r\n            .to(1, {position : cc.v2(0, 0)}))\r\n        .start();\r\n    },\r\n\r\n    // update (dt) {},\r\n\r\n    onCollisionEnter: function (other, self) {\r\n        if(other.node.group == \"Player\"){\r\n            this.collectWeapon(other.node.getComponent(Player3D)); \r\n        }\r\n    },\r\n\r\n    collectWeapon(player){\r\n        console.log(\"Player collect weapon: \" + this.weaponType);\r\n        player.changeWeapon(this.weaponType);\r\n\r\n        if(this.weaponType == EnWeapon.Sword){\r\n            GameInfo.TutorialDoneStage1 = true;       \r\n        }\r\n        \r\n        if(this.weaponType == EnWeapon.Archer){\r\n            GameInfo.TutorialDoneStage2 = true;\r\n        }\r\n\r\n        this.node.destroy();\r\n    }\r\n});\r\n"]}