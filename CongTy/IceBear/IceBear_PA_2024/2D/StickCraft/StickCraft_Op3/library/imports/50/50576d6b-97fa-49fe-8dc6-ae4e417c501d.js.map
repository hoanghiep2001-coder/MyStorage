{"version":3,"sources":["assets\\Script\\Character\\ArrowStick.js"],"names":["CONST","require","cc","Class","Component","properties","onLoad","_isLanching","_speed","StickArrowSpeed","_normalize","v2","start","Launch","normalize","node","angle","convertRad2Deg","Math","atan2","y","x","log","update","dt","setPosition","hitEnemy","console","destroy","hitPlatform","onCollisionEnter","other","self","group","window","isHitArrow","radians","pi","PI"],"mappings":";;;;;;AAAA,IAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE,EAHP;AAOL;AAEAC,EAAAA,MATK,oBASK;AACN,SAAKC,WAAL,GAAmB,KAAnB;AACA,SAAKC,MAAL,GAAcR,KAAK,CAACS,eAApB;AACA,SAAKC,UAAL,GAAkBR,EAAE,CAACS,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAlB;AACH,GAbI;AAgBLC,EAAAA,KAhBK,mBAgBI,CAER,CAlBI;AAqBLC,EAAAA,MArBK,kBAqBEC,SArBF,EAqBY;AACb,SAAKP,WAAL,GAAmB,IAAnB;AACA,SAAKG,UAAL,GAAkBI,SAAlB;AAEA,SAAKC,IAAL,CAAUC,KAAV,GAAkB,IAAI,KAAKC,cAAL,CAAoBC,IAAI,CAACC,KAAL,CAAW,KAAKT,UAAL,CAAgBU,CAA3B,EAA8B,KAAKV,UAAL,CAAgBW,CAA9C,CAApB,CAAtB;AAEAnB,IAAAA,EAAE,CAACoB,GAAH,CAAO,KAAKd,MAAZ,EAAoB,KAAKO,IAAL,CAAUC,KAA9B;AACH,GA5BI;AA+BLO,EAAAA,MA/BK,kBA+BGC,EA/BH,EA+BO;AACR,QAAG,CAAC,KAAKjB,WAAT,EAAsB;AAEtB,SAAKQ,IAAL,CAAUU,WAAV,CAAsB,KAAKV,IAAL,CAAUM,CAAV,GAAc,KAAKX,UAAL,CAAgBW,CAAhB,GAAoB,KAAKb,MAAzB,GAAkC,EAAlC,GAAuCgB,EAA3E,EAA+E,KAAKT,IAAL,CAAUK,CAAV,GAAc,KAAKV,UAAL,CAAgBU,CAAhB,GAAoB,KAAKZ,MAAzB,GAAkC,EAAlC,GAAuCgB,EAApI;AACH,GAnCI;AAsCLE,EAAAA,QAtCK,sBAsCK;AACNC,IAAAA,OAAO,CAACL,GAAR,CAAY,iBAAZ,EADM,CAEN;;AACA,SAAKP,IAAL,CAAUa,OAAV;AACH,GA1CI;AA6CLC,EAAAA,WA7CK,yBA6CQ;AACTF,IAAAA,OAAO,CAACL,GAAR,CAAY,oBAAZ;AACA,SAAKf,WAAL,GAAmB,KAAnB;AACA,SAAKQ,IAAL,CAAUa,OAAV;AACH,GAjDI;AAoDLE,EAAAA,gBAAgB,EAAE,0BAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AACrC,QAAGD,KAAK,CAAChB,IAAN,CAAWkB,KAAX,IAAoB,OAAvB,EAA+B;AAC3B,WAAKP,QAAL;AACAQ,MAAAA,MAAM,CAACC,UAAP,GAAoB,IAApB;AACH,KAHD,MAGO,IAAGJ,KAAK,CAAChB,IAAN,CAAWkB,KAAX,IAAoB,OAAvB,EAA+B;AAClC,WAAKJ,WAAL;AACH;AACJ,GA3DI;AA8DLZ,EAAAA,cA9DK,0BA8DUmB,OA9DV,EA8DkB;AACnB,QAAIC,EAAE,GAAGnB,IAAI,CAACoB,EAAd;AACA,WAAOF,OAAO,IAAI,MAAIC,EAAR,CAAd;AACH;AAjEI,CAAT","sourceRoot":"/","sourcesContent":["const CONST = require(\"CONST\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this._isLanching = false;\r\n        this._speed = CONST.StickArrowSpeed;\r\n        this._normalize = cc.v2(0,0);\r\n    },\r\n\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n\r\n    Launch(normalize){\r\n        this._isLanching = true;\r\n        this._normalize = normalize;\r\n\r\n        this.node.angle = 1 * this.convertRad2Deg(Math.atan2(this._normalize.y, this._normalize.x));\r\n\r\n        cc.log(this._speed, this.node.angle);\r\n    },\r\n\r\n\r\n    update (dt) {\r\n        if(!this._isLanching) return;\r\n\r\n        this.node.setPosition(this.node.x + this._normalize.x * this._speed * 10 * dt, this.node.y + this._normalize.y * this._speed * 10 * dt);\r\n    },\r\n\r\n\r\n    hitEnemy(){\r\n        console.log(\"Arrow Hit Enemy\");\r\n        // enemy.hit();\r\n        this.node.destroy();\r\n    },\r\n\r\n\r\n    hitPlatform(){\r\n        console.log(\"Arrow Hit Platform\");\r\n        this._isLanching = false;\r\n        this.node.destroy();\r\n    },\r\n\r\n\r\n    onCollisionEnter: function (other, self) {\r\n        if(other.node.group == \"Enemy\"){\r\n            this.hitEnemy();\r\n            window.isHitArrow = true;\r\n        } else if(other.node.group == \"Solid\"){\r\n            this.hitPlatform();\r\n        }\r\n    },\r\n\r\n\r\n    convertRad2Deg(radians){\r\n        var pi = Math.PI;\r\n        return radians * (180/pi);\r\n    },\r\n});\r\n"]}