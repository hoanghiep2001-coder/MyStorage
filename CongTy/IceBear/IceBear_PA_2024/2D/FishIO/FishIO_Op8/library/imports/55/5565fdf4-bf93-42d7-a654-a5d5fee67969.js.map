{"version":3,"sources":["assets\\scripts\\Controller\\GameController.js"],"names":["cc","Class","Component","properties","installPopup","Node","installButton","Button","touchArea","audioClick","AudioClip","audioAtk","audioUpgrade","audioWarning","audioBgMusic","audioEat","audioBossAtk","reviveSound","onLoad","node","on","installHandle","start","window","gameReady","onFinish","gameEnd","playAudio","audio","audioEngine","play","showPopupInstall","active","tween","getChildByName","repeatForever","to","scale","easing","getComponent","registerReviveAction","stopAudio","stopAll","playableSDK","openAppStore","ExitApi","log","exit","dapi","openStoreUrl","mraid","sys","os","OS_ANDROID","ANDROID","open","OS_IOS","IPHONE","IPAD","install"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        installPopup: cc.Node,\r\n        installButton: cc.Button,\r\n        touchArea: cc.Node,\r\n\r\n        //audio\r\n        audioClick: cc.AudioClip,\r\n        audioAtk: cc.AudioClip,\r\n        audioUpgrade: cc.AudioClip,\r\n        audioWarning: cc.AudioClip,\r\n        audioBgMusic: cc.AudioClip,\r\n        audioEat: cc.AudioClip,\r\n        audioBossAtk: cc.AudioClip,\r\n        reviveSound: cc.AudioClip,\r\n\r\n    },\r\n\r\n\r\n    onLoad () {\r\n        this.installButton.node.on(\"click\", this.installHandle, this);\r\n\r\n    },\r\n\r\n    start () {\r\n        window.gameReady && window.gameReady();\r\n    },\r\n\r\n    onFinish() {\r\n        window.gameEnd && window.gameEnd();\r\n    },\r\n\r\n    playAudio(audio){\r\n        if(audio === this.audioClick){\r\n            cc.audioEngine.play(this.audioClick, false, 1)\r\n        }else if(audio === this.audioAtk){\r\n            cc.audioEngine.play(this.audioAtk, false, 1)\r\n        }\r\n            else if(audio === this.reviveSound){\r\n                cc.audioEngine.play(this.reviveSound, false, 1)\r\n        }else if(audio === this.audioUpgrade){\r\n            cc.audioEngine.play(this.audioUpgrade, false, 1)\r\n        }else if(audio === this.audioWarning){\r\n            cc.audioEngine.play(this.audioWarning, false, 1)\r\n        }else if(audio === this.audioBgMusic){\r\n            cc.audioEngine.play(this.audioBgMusic, true, 1)\r\n        }else if(audio === this.audioEat){\r\n            cc.audioEngine.play(this.audioEat, false, 1)\r\n        }else if(audio === this.audioBossAtk){\r\n            cc.audioEngine.play(this.audioBossAtk, false, 1)\r\n        }\r\n    },\r\n\r\n    showPopupInstall(){\r\n        this.installPopup.active = true;\r\n\r\n        cc.tween(this.node.getChildByName(\"InstallPopup\").getChildByName(\"btn_Revive\"))\r\n        .repeatForever(\r\n            cc.tween(this.node.getChildByName(\"InstallPopup\").getChildByName(\"btn_Revive\"))\r\n                .to(0.5, { scale: 0.5 })\r\n                .to(0.5, { scale: 0.55 }, { easing: 'elasticOut' })\r\n        ).start();\r\n\r\n            this.touchArea.getComponent(\"TouchArea\").registerReviveAction();\r\n        // this.onFinish();\r\n        \r\n    },\r\n\r\n    stopAudio(){\r\n        cc.audioEngine.stopAll();\r\n    },\r\n\r\n\r\n    installHandle (){\r\n        this.playAudio(this.audioClick);\r\n        this.stopAudio();\r\n\r\n        //If ad network is tiktok\r\n        if (typeof (playableSDK) != \"undefined\") {\r\n            window.playableSDK.openAppStore();\r\n            return;\r\n        }\r\n        \r\n        // If ad network is google ads\r\n        if (typeof (ExitApi) != \"undefined\") {\r\n            cc.log(\"Call exit api\")\r\n            ExitApi.exit();\r\n            return;\r\n        }\r\n\r\n        // If ad netwrok is ironsources\r\n        if (typeof (dapi) != \"undefined\") {\r\n            cc.log(\"Call dapi\");\r\n            dapi.openStoreUrl();\r\n            return;\r\n        }\r\n\r\n        // If ad network support MRAID 2.0\r\n        if (typeof(mraid) != \"undefined\") {\r\n            if (cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.ANDROID) {\r\n                mraid.open(\"https://play.google.com/store/apps/details?id=com.fishio.hungryfish\");\r\n                return;\r\n            }\r\n\r\n            if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.IPHONE || cc.sys.os == cc.sys.IPAD) {\r\n                mraid.open(\"https://itunes.apple.com/us/com.fishio.hungryfish?mt=8\");\r\n                //mraid.open(\"https://itunes.apple.com/us/app/id1627374569?mt=8\");\r\n                return;\r\n            }\r\n\r\n            mraid.open(\"https://play.google.com/store/apps/details?id=com.fishio.hungryfish\");\r\n            return;\r\n        }\r\n        // If ad network is mindword. window alway avaiable so skip undefined check\r\n        window.install && window.install();\r\n    },\r\n\r\n});\r\n"]}