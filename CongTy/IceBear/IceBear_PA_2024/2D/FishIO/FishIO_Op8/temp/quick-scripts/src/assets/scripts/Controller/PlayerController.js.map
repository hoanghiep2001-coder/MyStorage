{"version":3,"sources":["assets\\scripts\\Controller\\PlayerController.js"],"names":["require","Constants","cc","Class","Component","properties","speed","isMove","touchArea","Node","targetPosition","Vec2","score","isLive","gc","headPlayer","crownGold","crownSilver","crownCopper","rigidBody","RigidBody","scoreLabel1","Label","scoreLabel2","scoreLabel3","rankName1","Sprite","rankName2","rankName3","sfName1","SpriteFrame","sfName2","sfName3","sfNamePlayer","start","gameController","getComponent","onCollisionEnter","other","self","tag","die","active","playAudio","audioBossAtk","node","getChildByName","sp","Skeleton","setAnimation","countDie","audioEat","Animation","play","scheduleOnce","showPopupInstall","update","dt","positionTouch","currentPosition","getPosition","lerp","setPosition"],"mappings":"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","sourceRoot":"/","sourcesContent":["const { Constants } = require(\"../Data/Constant\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n      speed: 5,\r\n      isMove: false,\r\n      touchArea: cc.Node,\r\n      targetPosition: cc.Vec2,\r\n      score:0,\r\n      isLive: true,\r\n      gc: cc.Node,\r\n      headPlayer: cc.Node,\r\n      crownGold: cc.Node,\r\n      crownSilver: cc.Node,\r\n      crownCopper: cc.Node,\r\n      rigidBody: cc.RigidBody,\r\n      \r\n      scoreLabel1: cc.Label,\r\n      scoreLabel2: cc.Label,\r\n      scoreLabel3: cc.Label,\r\n\r\n      rankName1: cc.Sprite,\r\n      rankName2: cc.Sprite,\r\n      rankName3: cc.Sprite,\r\n\r\n      sfName1: cc.SpriteFrame,\r\n      sfName2: cc.SpriteFrame,\r\n      sfName3: cc.SpriteFrame,\r\n      sfNamePlayer: cc.SpriteFrame,\r\n\r\n    },\r\n  \r\n    // onLoad () {},\r\n\r\n    start () {\r\n      this.gameController = this.gc.getComponent(\"GameController\");\r\n    },\r\n\r\n    onCollisionEnter (other, self) {\r\n      if(other.tag == 2 || other.tag == 3){\r\n          if(this.isLive){\r\n            this.die();\r\n            this.headPlayer.active = true;\r\n            this.gameController.playAudio(this.gameController.audioBossAtk);\r\n            this.node.getChildByName(\"Atk\").getComponent(sp.Skeleton).setAnimation(0, \"bite\", false);\r\n            Constants.countDie += 1;\r\n          }\r\n      }\r\n    },\r\n\r\n    die(){\r\n      this.gameController.playAudio(this.gameController.audioEat);\r\n      this.node.getChildByName(\"Body\").active = false;\r\n      this.node.getChildByName(\"Die\").active = true;\r\n      this.getComponent(cc.Animation).play(\"EnemyDieAnim\");\r\n      this.isLive = false;\r\n\r\n      // FINISH\r\n      this.scheduleOnce(function(){\r\n        this.gameController.showPopupInstall();\r\n      },1)\r\n    },\r\n\r\n    // addScore(){\r\n    //   this.score += cc.math.randomRangeInt(5, 15);\r\n    //   this.crownGold.active = false;\r\n    //   this.crownSilver.active = false;\r\n    //   this.crownCopper.active = false;\r\n    //   if(this.score >= 60){\r\n    //     this.crownGold.active = true;\r\n    //     this.node.setScale(1.7);\r\n    //     this.scoreLabel1.string = \"\"+this.score;\r\n    //     this.scoreLabel2.string = \"40\";\r\n    //     this.scoreLabel3.string = \"25\";\r\n        \r\n    //     this.rankName1.spriteFrame = this.sfNamePlayer;\r\n    //     this.rankName2.spriteFrame = this.sfName1;\r\n    //     this.rankName3.spriteFrame = this.sfName2;\r\n    //   }\r\n    //   if(this.score >= 40 && this.score < 60) {\r\n    //     this.crownGold.active = true;\r\n    //     this.node.setScale(1.5);\r\n    //     this.scoreLabel1.string = \"\"+this.score;\r\n    //     this.scoreLabel2.string = \"40\";\r\n    //     this.scoreLabel3.string = \"25\";\r\n\r\n    //     this.rankName1.spriteFrame = this.sfNamePlayer;\r\n    //     this.rankName2.spriteFrame = this.sfName1;\r\n    //     this.rankName3.spriteFrame = this.sfName2;\r\n    //   }\r\n    //   else if(this.score >= 25 && this.score < 40) {\r\n    //     this.crownSilver.active = true;\r\n    //     this.node.setScale(1.3);\r\n    //     this.scoreLabel2.string = \"\"+this.score;\r\n    //     this.scoreLabel3.string = \"25\";\r\n\r\n    //     this.rankName2.spriteFrame = this.sfNamePlayer;\r\n    //     this.rankName3.spriteFrame = this.sfName2;\r\n    //   }\r\n    //   else if(this.score >= 10 && this.score < 25) {\r\n    //     this.crownCopper.active = true;\r\n    //     this.node.setScale(1.1);\r\n    //     this.scoreLabel3.string = \"\"+this.score;\r\n\r\n    //     this.rankName3.spriteFrame = this.sfNamePlayer;\r\n    //   }\r\n    // },\r\n\r\n    update (dt) {\r\n      if(this.isMove && this.isLive){\r\n        this.targetPosition = this.touchArea.getComponent(\"TouchArea\").positionTouch;\r\n\r\n        //console.log(this.targetPosition.x+\" --- \"+this.targetPosition.y);\r\n        \r\n        let currentPosition = this.node.getPosition();\r\n        currentPosition.lerp(this.targetPosition, 0.02, currentPosition);\r\n        this.node.setPosition(currentPosition);\r\n\r\n       \r\n      }\r\n    },\r\n});\r\n"]}