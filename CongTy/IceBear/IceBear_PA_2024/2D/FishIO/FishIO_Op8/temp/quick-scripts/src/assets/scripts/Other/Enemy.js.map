{"version":3,"sources":["assets\\scripts\\Other\\Enemy.js"],"names":["cc","Class","Component","properties","isLive","body","RigidBody","maxSpeed","nameFish","Sprite","arrNameFish","SpriteFrame","flag","arrFlag","onCollisionEnter","other","self","tag","die","start","randomName","math","randomRangeInt","length","spriteFrame","randomFlag","randomChangeSpeed","randomVecX","randomVecY","randomVelocity","schedule","linearVelocity","v2","node","getChildByName","angle","misc","radiansToDegrees","Math","atan","scaleX","active","getComponent","sp","Skeleton","setAnimation","Animation","play","scheduleOnce","destroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        isLive: false,\r\n        body: cc.RigidBody,\r\n        maxSpeed: 60,\r\n        nameFish: cc.Sprite,\r\n        arrNameFish: [cc.SpriteFrame],\r\n        flag: cc.Sprite,\r\n        arrFlag: [cc.SpriteFrame],\r\n\r\n    },\r\n\r\n\r\n    onCollisionEnter(other, self) {\r\n        if (other.tag == 2) {\r\n            if (this.isLive) {\r\n                this.die();\r\n            }\r\n        }\r\n    },\r\n\r\n    start() {\r\n        this.randomName = 0;\r\n        this.randomName = cc.math.randomRangeInt(0, this.arrNameFish.length);\r\n        this.nameFish.spriteFrame = this.arrNameFish[this.randomName];\r\n\r\n        this.randomFlag = 0;\r\n        this.randomFlag = cc.math.randomRangeInt(0, this.arrFlag.length);\r\n        this.flag.spriteFrame = this.arrFlag[this.randomFlag];\r\n\r\n        this.randomChangeSpeed = 3;\r\n        this.randomVecX = 0;\r\n        this.randomVecY = 0;\r\n        this.isLive = true;\r\n        this.randomVelocity();\r\n        this.schedule(function () {\r\n            this.randomVelocity();\r\n        }, this.randomChangeSpeed, 20, 0);\r\n    },\r\n\r\n    randomVelocity() {\r\n        this.randomChangeSpeed = cc.math.randomRangeInt(2, 5);\r\n        this.randomVecX = cc.math.randomRangeInt(-this.maxSpeed, this.maxSpeed);\r\n        this.randomVecY = cc.math.randomRangeInt(-this.maxSpeed, this.maxSpeed);\r\n\r\n        this.body.linearVelocity = cc.v2(this.randomVecX, this.randomVecY);\r\n        this.node.getChildByName(\"Body\").angle = cc.misc.radiansToDegrees(Math.atan(this.randomVecY / this.randomVecX));\r\n        if (this.randomVecX < 0) {\r\n            this.node.getChildByName(\"Body\").scaleX = -1;\r\n        } else {\r\n            this.node.getChildByName(\"Body\").scaleX = 1;\r\n        }\r\n    },\r\n\r\n    die() {\r\n        this.body.linearVelocity = cc.v2(0, 0);\r\n        this.node.getChildByName(\"Name\").active = false;\r\n        this.node.getChildByName(\"Flag\").active = false;\r\n        this.node.getChildByName(\"Atk\").getComponent(sp.Skeleton).setAnimation(0, \"bite\", false);\r\n        this.node.getChildByName(\"Body\").active = false;\r\n        this.node.getChildByName(\"Die\").active = true;\r\n        this.isLive = false;\r\n        this.getComponent(cc.Animation).play(\"EnemyDieAnim\");\r\n        this.scheduleOnce(function () {\r\n            this.node.destroy();\r\n        }, 2)\r\n    },\r\n});\r\n"]}