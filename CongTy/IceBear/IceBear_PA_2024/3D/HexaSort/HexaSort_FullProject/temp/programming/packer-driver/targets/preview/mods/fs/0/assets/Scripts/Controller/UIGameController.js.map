{"version":3,"sources":["file:///D:/PA/IceBear_PA_2024/3D/HexaSort/HexaSort_FullProject/assets/Scripts/Controller/UIGameController.ts"],"names":["_decorator","Component","easing","Label","Node","tween","Vec3","GameInfo","SoundController","CONST","GameController","ccclass","property","UIGameController","start","registerEvent","hideMask","CTA","getChildByName","btn","on","EventType","TOUCH_START","installHandle","activeTweenForBtnCTA","repeatForever","to","scale","elasticOut","showCTATextContent","active","IsShowPopupInstall","label","getComponent","isLose","Instance","PlaySound","SoundTrack","loseSound","string","winSound","update","dt","isWin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAkBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;;AAC7DC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,e,iBAAAA,e;;AACAC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,c,iBAAAA,c;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;;kCAIjBa,gB,WADZF,OAAO,CAAC,kBAAD,C,UAGHC,QAAQ;AAAA;AAAA,2C,UAGRA,QAAQ,CAACR,IAAD,C,UAGRQ,QAAQ,CAACR,IAAD,C,UAGRQ,QAAQ,CAACR,IAAD,C,UAIRQ,QAAQ,CAACR,IAAD,C,oCAhBb,MACaS,gBADb,SACsCZ,SADtC,CACgD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,8CAavB,EAbuB;;AAAA;AAAA;;AAsBlCa,QAAAA,KAAK,GAAS;AACpB,eAAKC,aAAL,GADoB,CAGpB;AACH;;AAGMA,QAAAA,aAAa,GAAS;AACzB,cAAIC,QAAQ,GAAG,KAAKC,GAAL,CAASC,cAAT,CAAwB,UAAxB,CAAf;AACA,cAAIC,GAAG,GAAG,KAAKF,GAAL,CAASC,cAAT,CAAwB,KAAxB,CAAV,CAFyB,CAIzB;;AACAF,UAAAA,QAAQ,CAACI,EAAT,CAAYhB,IAAI,CAACiB,SAAL,CAAeC,WAA3B,EAAwC,KAAKZ,cAAL,CAAoBa,aAA5D,EAA2E,IAA3E;AAEAJ,UAAAA,GAAG,CAACC,EAAJ,CAAOhB,IAAI,CAACiB,SAAL,CAAeC,WAAtB,EAAmC,KAAKZ,cAAL,CAAoBa,aAAvD,EAAsE,IAAtE;AACH;;AAGOC,QAAAA,oBAAoB,GAAS;AACjC,cAAIL,GAAG,GAAG,KAAKF,GAAL,CAASC,cAAT,CAAwB,KAAxB,CAAV;AACAb,UAAAA,KAAK,CAACc,GAAD,CAAL,CACCM,aADD,CAEGpB,KAAK,CAACc,GAAD,CAAL,CACMO,EADN,CACS,GADT,EACc;AAAEC,YAAAA,KAAK,EAAE,IAAIrB,IAAJ,CAAS,GAAT,EAAc,GAAd,EAAmB,GAAnB;AAAT,WADd,EAEMoB,EAFN,CAES,GAFT,EAEc;AAAEC,YAAAA,KAAK,EAAG,IAAIrB,IAAJ,CAAS,IAAT,EAAe,IAAf,EAAqB,IAArB;AAAV,WAFd,EAEqD;AAAEJ,YAAAA,MAAM,EAAEA,MAAM,CAAC0B;AAAjB,WAFrD,CAFH,EAKEd,KALF;AAMH;;AAGMe,QAAAA,kBAAkB,GAAS;AAC9B,eAAKZ,GAAL,CAASa,MAAT,GAAkB,IAAlB;AAEA;AAAA;AAAA,oCAASC,kBAAT,GAA8B,IAA9B;AAEA,cAAIC,KAAK,GAAG,KAAKf,GAAL,CAASC,cAAT,CAAwB,KAAxB,EAA+BA,cAA/B,CAA8C,OAA9C,EAAuDe,YAAvD,CAAoE9B,KAApE,CAAZ;;AAEA,cAAG;AAAA;AAAA,oCAAS+B,MAAZ,EAAoB;AAChB;AAAA;AAAA,oDAAgBC,QAAhB;AAAA;AAAA,oDAA0CC,SAA1C,CAAoD;AAAA;AAAA,gCAAMC,UAAN,CAAiBC,SAArE;AACAN,YAAAA,KAAK,CAACO,MAAN,GAAe,WAAf;AACH,WAHD,MAKK;AACD;AAAA;AAAA,oDAAgBJ,QAAhB;AAAA;AAAA,oDAA0CC,SAA1C,CAAoD;AAAA;AAAA,gCAAMC,UAAN,CAAiBG,QAArE;AACAR,YAAAA,KAAK,CAACO,MAAN,GAAe,UAAf;AACH;AACJ;;AAGSE,QAAAA,MAAM,CAACC,EAAD,EAAmB;AAC/B,cAAG,CAAC;AAAA;AAAA,oCAASC,KAAT,IAAkB;AAAA;AAAA,oCAAST,MAA5B,KAAuC,CAAC;AAAA;AAAA,oCAASH,kBAApD,EAAwE,KAAKF,kBAAL;AAC3E;;AAxE2C,O;;;;;iBAGX,I;;;;;;;iBAGV,I;;;;;;;iBAGR,I;;;;;;;iBAGG,I;;;;;;;iBAIN,I","sourcesContent":["\r\nimport { _decorator, Component, easing, Graphics, Label, Node, tween, Vec3 } from 'cc';\r\nimport { GameInfo } from '../Const/GameInfo';\r\nimport { SoundController } from './SoundController';\r\nimport { CONST } from '../Const/CONST';\r\nimport { GameController } from './GameController';\r\nconst { ccclass, property } = _decorator;\r\n\r\n \r\n@ccclass('UIGameController')\r\nexport class UIGameController extends Component {\r\n\r\n    @property(GameController) \r\n    GameController: GameController = null;\r\n\r\n    @property(Node)\r\n    PointContainer: Node = null;\r\n\r\n    @property(Node)\r\n    Cursor: Node = null;\r\n\r\n    @property(Node)\r\n    Bricks_3D: Node = null;\r\n    BrickNodes: Node[] = [];\r\n\r\n    @property(Node)\r\n    CTA: Node = null;\r\n    \r\n\r\n\r\n    \r\n\r\n    protected start(): void {\r\n        this.registerEvent();\r\n\r\n        // this.activeTweenForBtnCTA()\r\n    }\r\n\r\n\r\n    public registerEvent(): void {\r\n        let hideMask = this.CTA.getChildByName(\"HideMask\");\r\n        let btn = this.CTA.getChildByName(\"btn\");\r\n\r\n        // applovin & mtg\r\n        hideMask.on(Node.EventType.TOUCH_START, this.GameController.installHandle, this);\r\n\r\n        btn.on(Node.EventType.TOUCH_START, this.GameController.installHandle, this);\r\n    }\r\n\r\n\r\n    private activeTweenForBtnCTA(): void {\r\n        let btn = this.CTA.getChildByName(\"btn\");\r\n        tween(btn)\r\n        .repeatForever(\r\n           tween(btn)\r\n                .to(0.5, { scale: new Vec3(0.5, 0.5, 0.5) })\r\n                .to(0.5, { scale:  new Vec3(0.45, 0.45, 0.45)}, { easing: easing.elasticOut})\r\n        ).start();\r\n    }\r\n\r\n\r\n    public showCTATextContent(): void {\r\n        this.CTA.active = true;\r\n\r\n        GameInfo.IsShowPopupInstall = true;\r\n\r\n        let label = this.CTA.getChildByName(\"btn\").getChildByName(\"Label\").getComponent(Label);\r\n\r\n        if(GameInfo.isLose) {\r\n            SoundController.Instance(SoundController).PlaySound(CONST.SoundTrack.loseSound);\r\n            label.string = \"Try Again\"\r\n        }\r\n\r\n        else {\r\n            SoundController.Instance(SoundController).PlaySound(CONST.SoundTrack.winSound);\r\n            label.string = \"Continue\"\r\n        }\r\n    }\r\n\r\n\r\n    protected update(dt: number): void {\r\n        if((GameInfo.isWin || GameInfo.isLose) && !GameInfo.IsShowPopupInstall) this.showCTATextContent();\r\n    }\r\n}\r\n\r\n"]}