{"version":3,"sources":["file:///D:/PA_2024/3D/BilliardPuzzle/BilliardPuzzle_Op12/assets/Script/Main.ts"],"names":["_decorator","Component","Node","RigidBody","Vec3","Sprite","tween","v2","view","BoxCollider","sp","ToStore","Responsive","Constants","AudioManager","IronSource","ccclass","property","Main","Skeleton","onLoad","isLose","ApplyEvent","posBall_00","Ball_00","getPosition","clone","posBall_09","Ball_09","previousPosition_01","previousPosition_02","start","Cube","getComponent","enabled","node","on","EventType","TOUCH_MOVE","AngleCube","TOUCH_START","TouchStart","TOUCH_END","TouchEnd","TOUCH_CANCEL","Bar_Force_Interact","SetBarForceDelta","SetBarForce","SetBarForceEnd","event","isActiveCTA","installHandle","touchStartPos","getLocation","handleIronSourcePlaySound","playSound","SoundTrack","AngleSound","PoolbackText","active","stopSound","TouchStartToStore","hasNodeStopped","dt","flagStart","velocity","getLinearVelocity","velocityMagnitudeSquared","lengthSqr","stopThresholdSquared","isStopping","activeCTA","FnEnd","isMainBallStoped","hint","setPosition","Bar_Force_View","fillRange","isPlaying","touchStartPosBarForce","PercentFn","percent","forceSet","forceReturn","ironSource","isEndGame","scheduleOnce","playedCount","isPlayFirstTime","AddForce","Hand_02","touchPos","deltaY","y","posY","fillrange","Enable","Hand_01","Crosshair","deltaX","x","parent","setRotationFromEuler","eulerAngles","to","position","caculateForce","call","flagShowCube","number","result","showCombo","scoreCount","comboCount","Combo","setSkin","setAnimation","woaSound1","woaSound2","off","vertical","View_CTA","getChildByName","horizontal","Ver_BtnTryAgain","Ver_BtnContinue","Hor_BtnTryAgain","Hor_BtnContinue","isWin","update","screenSize","getVisibleSize","Bar_Force","handleMuteSoundIronSource"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, RigidBody, Vec3, Sprite, tween, v2, screen, misc, view, Vec2, AudioClip, AudioSource, Animation, EventTouch, BoxCollider, log, v3, UITransform, sp, Label, geometry, PhysicsSystem } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { ToStore } from './ToStore';\nimport { Responsive } from './Responsive';\nimport { Constants } from './Data/Constant';\nimport { AudioManager } from './Plugin/AudioManager';\nimport { IronSource } from './Plugin/IronSource';\n\n\n@ccclass('Main')\nexport class Main extends Component {\n\n    @property(AudioManager)\n    AudioManager: AudioManager = null;\n    @property(IronSource)\n    IronSource: IronSource = null;\n    @property(ToStore)\n    ToStore: ToStore;\n    @property(Responsive)\n    Responsive: Responsive;\n\n\n    @property(Node)\n    Cube: Node = null;\n    @property(Node)\n    hint: Node = null;\n    @property(Node)\n    View_CTA: Node = null;\n    @property(Node)\n    Bar_Force: Node = null;\n    @property(Node)\n    Bar_Force_Interact: Node = null;\n    @property(Node)\n    Bar_Force_View: Node = null;\n    @property(Node)\n    Hand_01: Node = null;\n    @property(Node)\n    Hand_02: Node = null;\n    @property(Node)\n    Crosshair: Node = null;\n    @property(Node)\n    Ball_00: Node = null;\n    @property(Node)\n    Ball_09: Node = null;\n    @property(Node)\n    Head: Node = null;\n    @property(Node)\n    Store: Node = null;\n    @property(Node)\n    Enable: Node = null;\n    @property(Node)\n    PoolbackText: Node = null;\n    // @property(Label)\n    // ShootingTurn: Label = null;\n    @property(sp.Skeleton)\n    Combo: sp.Skeleton = null;\n\n\n    touchStartPos: Vec2 = v2(0, 0);\n    touchStartPosBarForce: Vec2 = v2(0, 0);\n    forceSet: number = 0;\n    flagStatusBall_00: boolean = false;\n    flagStatusBall_09: boolean = false;\n    previousPosition_01: any = v2(0, 0);\n    previousPosition_02: any = v2(0, 0);\n    posBall_00: any = v2(0, 0);\n    posBall_09: any = v2(0, 0);\n    flagStart: boolean = false;\n    flagShowCube: boolean = false;\n    loadScene: boolean = false;\n    isActiveCTA: boolean = false;\n\n\n    onLoad() {\n        // ironsource\n        // Constants.isLose && this.AudioManager.playSound(Constants.SoundTrack.bgSound);\n        Constants.isLose = false;\n        this.ApplyEvent();\n        this.posBall_00 = this.Ball_00.getPosition().clone();\n        this.posBall_09 = this.Ball_09.getPosition().clone();\n        this.previousPosition_01 = this.posBall_00;\n        this.previousPosition_02 = this.posBall_09;\n    }\n\n\n    protected start(): void {\n        // this.AudioManager.playSound(Constants.SoundTrack.bgSound)\n        this.Cube.getComponent(BoxCollider).enabled = true;\n    }\n\n\n    ApplyEvent() {\n        this.node.on(Node.EventType.TOUCH_MOVE, this.AngleCube, this);\n        this.node.on(Node.EventType.TOUCH_START, this.TouchStart, this);\n        this.node.on(Node.EventType.TOUCH_END, this.TouchEnd, this);\n        this.node.on(Node.EventType.TOUCH_CANCEL, this.TouchEnd, this);\n        this.Bar_Force_Interact.on(Node.EventType.TOUCH_START, this.SetBarForceDelta, this);\n        this.Bar_Force_Interact.on(Node.EventType.TOUCH_MOVE, this.SetBarForce, this);\n        this.Bar_Force_Interact.on(Node.EventType.TOUCH_END, this.SetBarForceEnd, this);\n        this.Bar_Force_Interact.on(Node.EventType.TOUCH_CANCEL, this.SetBarForceEnd, this);\n    }\n\n\n    TouchStart(event) {\n        // mtg & applovin\n        this.isActiveCTA && this.ToStore.installHandle();\n\n        this.touchStartPos = event.getLocation();\n        this.IronSource.handleIronSourcePlaySound();\n        this.AudioManager.playSound(Constants.SoundTrack.AngleSound);\n        this.PoolbackText.active = false;\n    }\n\n\n    private TouchEnd(): void {\n        this.AudioManager.stopSound(Constants.SoundTrack.AngleSound)\n    }\n\n\n    TouchStartToStore() {\n        this.ToStore.installHandle();\n    }\n\n\n    hasNodeStopped(dt: number) {\n        if (this.flagStart) {\n            let velocity = new Vec3();\n            this.Ball_00.getComponent(\"Ball\").getComponent(RigidBody).getLinearVelocity(velocity);\n            const velocityMagnitudeSquared = velocity.lengthSqr();\n            const stopThresholdSquared = 0.01 * 0.01;\n            const isStopping = velocityMagnitudeSquared < stopThresholdSquared;\n\n            isStopping && this.activeCTA();\n            // isStopping && !Constants.isPlaying && !Constants.isLose && this.FnEnd();\n        };\n    }\n\n\n    FnEnd() {\n        Constants.isMainBallStoped = true;\n        this.Cube.active = true;\n        this.hint.active = true;\n        this.Bar_Force_Interact.setPosition(0, 0, 0);\n        this.Bar_Force_View.getComponent(Sprite).fillRange = 0;\n        this.Cube.getComponent(BoxCollider).enabled = false;\n    }\n\n\n    SetBarForceDelta(event) {\n        this.isActiveCTA && this.ToStore.installHandle();\n\n        Constants.isPlaying = true;\n        this.Cube.getComponent(BoxCollider).enabled = true;\n        this.touchStartPosBarForce = event.getLocation();\n        this.AudioManager.playSound(Constants.SoundTrack.AngleSound)\n    }\n\n\n    PercentFn() {\n        const percent = -this.forceSet / 400 * 100;\n        const forceReturn = 0.1 + (percent / 100) * (0.05 - 0.1);\n        return forceReturn;\n    }\n\n\n    SetBarForceEnd() {\n        if (Constants.ironSource.isEndGame) {\n            return;\n        }\n\n        this.scheduleOnce(() => {\n            Constants.isPlaying = false;\n        }, 1)\n\n        Constants.playedCount += 1;\n        // Constants.shootingTurn -= 1;\n        Constants.isPlayFirstTime = true;\n        this.AudioManager.stopSound(Constants.SoundTrack.AngleSound);\n        const percent = this.PercentFn();\n        this.AddForce(percent);\n        this.forceSet = 0;\n        this.touchStartPosBarForce = v2(0, 0);\n    }\n\n\n    SetBarForce(event: EventTouch) {\n        if (Constants.ironSource.isEndGame) {\n            return;\n        }\n\n        this.Hand_02.active = false;\n        const touchPos = event.getLocation();\n        const deltaY = (touchPos.y - this.touchStartPosBarForce.y);\n        const posY = this.Bar_Force_Interact.getPosition().y + deltaY;\n\n        if (posY < -400 || posY > 0) {\n            return;\n        }\n        this.Bar_Force_Interact.setPosition(0, posY, 0);\n\n        this.forceSet = posY;\n        const fillrange = posY / 440;\n        this.Bar_Force_View.getComponent(Sprite).fillRange = fillrange;\n        this.touchStartPosBarForce = touchPos;\n    }\n\n\n    AngleCube(event) {\n        this.Enable.active = false;\n        this.Hand_01.active = false;\n        this.Crosshair.active = false;\n        this.Hand_02.active = true;\n        const touchPos = event.getLocation();\n        const deltaX = (touchPos.x - this.touchStartPos.x);\n        this.Cube.parent.setRotationFromEuler(0, this.Cube.parent.eulerAngles.y - deltaX, 0);\n        this.touchStartPos = touchPos;\n    }\n\n\n    private AddForce(percent: number): void {\n        this.hint.active = false;\n        tween(this.Cube)\n            .to(percent, { position: new Vec3(0, 0, this.caculateForce(percent)) })\n            .call(() => {\n                this.scheduleOnce(() => {\n                    this.Cube.setPosition(0, 0, 1.3);\n                    this.flagShowCube = true;\n                }, 0.5)\n                this.Cube.active = false;\n                this.flagStart = true;\n            })\n            .start();\n    }\n\n\n    private caculateForce(number: number): number {\n        let result: number;\n        result = 1.2;\n\n        return result;\n    }\n\n\n    private showCombo(): void {\n        if (Constants.scoreCount > Constants.comboCount) {\n            Constants.comboCount += 1;\n            switch (Constants.comboCount) {\n                case 1:\n                    this.Combo.setSkin(\"Combo 1\");\n                    this.Combo.setAnimation(0, \"action\", false);\n                    break;\n                case 2:\n                    this.Combo.setSkin(\"Combo 2\");\n                    this.Combo.setAnimation(0, \"action\", false);\n                    this.AudioManager.playSound(Constants.SoundTrack.woaSound1)\n                    break;\n                case 3:\n                    this.Combo.setSkin(\"Combo 3\");\n                    this.Combo.setAnimation(0, \"action\", false);\n                    this.AudioManager.playSound(Constants.SoundTrack.woaSound2)\n                    break;\n                case 4:\n                    this.Combo.setSkin(\"Combo 4\");\n                    this.Combo.setAnimation(0, \"action\", false);\n                    this.AudioManager.playSound(Constants.SoundTrack.woaSound1)\n                    break;\n                case 5:\n                    this.Combo.setSkin(\"Combo 5\");\n                    this.Combo.setAnimation(0, \"action\", false);\n                    this.AudioManager.playSound(Constants.SoundTrack.woaSound2)\n                    break;\n                case 6:\n                    this.Combo.setSkin(\"Combo 6\");\n                    this.Combo.setAnimation(0, \"action\", false);\n                    this.AudioManager.playSound(Constants.SoundTrack.woaSound1)\n                    break;\n                case 7:\n                    this.Combo.setSkin(\"Combo 7\");\n                    this.Combo.setAnimation(0, \"action\", false);\n                    this.AudioManager.playSound(Constants.SoundTrack.woaSound2)\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n\n\n    private activeCTA(): void {\n        this.isActiveCTA = true;\n\n        this.node.off(Node.EventType.TOUCH_MOVE);\n        this.node.off(Node.EventType.TOUCH_START);\n        this.node.off(Node.EventType.TOUCH_END);\n        this.node.off(Node.EventType.TOUCH_CANCEL);\n        this.Bar_Force_Interact.off(Node.EventType.TOUCH_START);\n        this.Bar_Force_Interact.off(Node.EventType.TOUCH_MOVE);\n        this.Bar_Force_Interact.off(Node.EventType.TOUCH_END);\n        this.Bar_Force_Interact.off(Node.EventType.TOUCH_CANCEL);\n\n        let vertical = this.View_CTA.getChildByName(\"_ver\");\n        let horizontal = this.View_CTA.getChildByName(\"_hor\");\n\n        let Ver_BtnTryAgain = vertical.getChildByName(\"btn_tryagain\");\n        let Ver_BtnContinue = vertical.getChildByName(\"btn_continue\");\n        Ver_BtnTryAgain.on(Node.EventType.TOUCH_START, this.ToStore.installHandle, this);\n        Ver_BtnContinue.on(Node.EventType.TOUCH_START, this.ToStore.installHandle, this);\n\n        let Hor_BtnTryAgain = horizontal.getChildByName(\"Node\").getChildByName(\"btn_tryagain\");\n        let Hor_BtnContinue = horizontal.getChildByName(\"Node\").getChildByName(\"btn_continue\");\n        Hor_BtnTryAgain.on(Node.EventType.TOUCH_START, this.ToStore.installHandle, this);\n        Hor_BtnContinue.on(Node.EventType.TOUCH_START, this.ToStore.installHandle, this);\n\n        // mtg & applovin\n        // let Ver_Overlay = vertical.getChildByName(\"SpriteSplash\");\n        // let Hor_Overlay = horizontal.getChildByName(\"SpriteSplash-001\");\n        // Ver_Overlay.on(Node.EventType.TOUCH_START, this.ToStore.installHandle, this);\n        // Hor_Overlay.on(Node.EventType.TOUCH_START, this.ToStore.installHandle, this);\n\n\n        if(Constants.isWin) {\n            Ver_BtnTryAgain.active = false;\n            Hor_BtnTryAgain.active = false;\n            Ver_BtnContinue.active = true;\n            Hor_BtnContinue.active = true;\n        } else {\n            Ver_BtnTryAgain.active = true;\n            Hor_BtnTryAgain.active = true;\n            Ver_BtnContinue.active = false;\n            Hor_BtnContinue.active = false;\n        }\n\n        this.scheduleOnce(() => {this.View_CTA.active = true;}, 1)\n        \n    }\n\n\n    update(dt) {\n        const screenSize = view.getVisibleSize();\n        this.Bar_Force.setPosition(screenSize.x / 2.4, this.Bar_Force.getPosition().y, 0);\n\n        Constants.isLose && !this.isActiveCTA && this.activeCTA();\n        Constants.isWin && !this.isActiveCTA && this.activeCTA();\n        !Constants.ironSource.isEndGame && this.showCombo();\n        !Constants.ironSource.isEndGame && this.hasNodeStopped(dt);\n\n        // ironsource\n        this.IronSource.handleMuteSoundIronSource();\n    }\n}\n\n"]}