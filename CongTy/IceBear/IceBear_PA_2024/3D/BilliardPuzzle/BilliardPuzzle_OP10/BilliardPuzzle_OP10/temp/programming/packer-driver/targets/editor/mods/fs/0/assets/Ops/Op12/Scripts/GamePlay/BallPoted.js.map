{"version":3,"sources":["file:///D:/PA_2024/3D/BilliardPuzzle/Billiard/assets/Ops/Op12/Scripts/GamePlay/BallPoted.ts"],"names":["_decorator","Component","instantiate","Node","Prefab","RigidBody","Vec3","EventManager","Global","ccclass","property","BallPoted","SpawnPotedBall","index","boolIsSpawn","count","scheduleOnce","ball","ballPrefabs","holder","addChild","setPosition","ZERO","getComponent","applyForce","getPosition","start","instance","on"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAkBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;;AACpEC,MAAAA,Y;;AACAC,MAAAA,M;;;;;;;OAED;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;2BAIjBW,S,WADZF,OAAO,CAAC,WAAD,C,UAGHC,QAAQ,CAACN,MAAD,C,UAGRM,QAAQ,CAACP,IAAD,C,oCANb,MACaQ,SADb,SAC+BV,SAD/B,CACyC;AAAA;AAAA;;AAAA;;AAAA;;AAAA,+CAQd,KARc;;AAAA,yCAU7B,CAV6B;AAAA;;AAYrCW,QAAAA,cAAc,CAACC,KAAD,EAAgB;AAC1B;AACA;AACA;AACA;AAEA,cAAI,KAAKC,WAAT,EAAsB;AAClB,iBAAKC,KAAL,IAAc,CAAd;AACA,iBAAKC,YAAL,CAAkB,MAAM;AACpB,mBAAKJ,cAAL,CAAoBC,KAApB;AACH,aAFD,EAEG,KAAKE,KAAL,GAAa,GAFhB;AAGA;AACH;;AAED,eAAKD,WAAL,GAAmB,IAAnB;AACA,cAAIG,IAAI,GAAGf,WAAW,CAAC,KAAKgB,WAAL,CAAiBL,KAAjB,CAAD,CAAtB;AACA,eAAKM,MAAL,CAAYC,QAAZ,CAAqBH,IAArB;AACAA,UAAAA,IAAI,CAACI,WAAL,CAAiBf,IAAI,CAACgB,IAAtB;AACAL,UAAAA,IAAI,CAACM,YAAL,CAAkBlB,SAAlB,EAA6BmB,UAA7B,CAAwC,IAAIlB,IAAJ,CAAS,EAAT,EAAa,CAAb,EAAgB,CAAhB,CAAxC,EAA4DW,IAAI,CAACQ,WAAL,EAA5D;AACA,eAAKT,YAAL,CAAkB,MAAM;AACpB,iBAAKF,WAAL,GAAmB,KAAnB;AACH,WAFD,EAEG,CAFH;AAGH;;AAEDY,QAAAA,KAAK,GAAG;AACJ;AAAA;AAAA,4CAAaC,QAAb,CAAsBC,EAAtB,CAAyB;AAAA;AAAA,gCAAOhB,cAAhC,EAAgD,KAAKA,cAArD,EAAqE,IAArE;AAEH;;AAvCoC,O;;;;;iBAGb,E;;;;;;;iBAGT,I","sourcesContent":["\nimport { _decorator, Component, instantiate, log, Node, Prefab, RigidBody, Vec3 } from 'cc';\nimport EventManager from '../Utility3D/Observer/EventManager';\nimport Global from '../Utility3D/Global';\nimport { GameManager } from '../Utility3D/GameManager';\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('BallPoted')\nexport class BallPoted extends Component {\n\n    @property(Prefab)\n    ballPrefabs: Prefab[] = [];\n\n    @property(Node)\n    holder: Node = null;\n\n    boolIsSpawn: boolean = false;\n\n    count = 0;\n\n    SpawnPotedBall(index: number) {\n        // if (Global.firstShoot) {\n        //     GameManager.Instance(GameManager).ShowEndcard();\n        //    // log(\"endgame\");\n        // }\n\n        if (this.boolIsSpawn) {\n            this.count += 1;\n            this.scheduleOnce(() => {\n                this.SpawnPotedBall(index);\n            }, this.count * 0.5)\n            return;\n        }\n        \n        this.boolIsSpawn = true;\n        var ball = instantiate(this.ballPrefabs[index]);\n        this.holder.addChild(ball);\n        ball.setPosition(Vec3.ZERO);\n        ball.getComponent(RigidBody).applyForce(new Vec3(50, 0, 0), ball.getPosition());\n        this.scheduleOnce(() => {\n            this.boolIsSpawn = false;\n        }, 1);\n    }\n\n    start() {\n        EventManager.instance.on(Global.SpawnPotedBall, this.SpawnPotedBall, this);\n\n    }\n\n\n}\n\n\n"]}