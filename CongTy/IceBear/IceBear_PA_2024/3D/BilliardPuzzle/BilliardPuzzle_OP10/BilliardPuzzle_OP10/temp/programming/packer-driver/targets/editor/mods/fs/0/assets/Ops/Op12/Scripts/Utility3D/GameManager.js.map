{"version":3,"sources":["file:///D:/PA_2024/3D/BilliardPuzzle/Billiard/assets/Ops/Op12/Scripts/Utility3D/GameManager.ts"],"names":["_decorator","Animation","Color","Node","ParticleSystem","Sprite","tween","Singleton","Constants","Global","ccclass","property","GameManager","constructor","_instance","onLoad","handleMuteSoundIronSource","ironSource","State","parseInt","localStorage","getItem","SoundState","isEndGame","ShowEndcard","endGame","CTA","to","color","call","btnAll","active","start","ActiveTextPraise","textPraise","getComponent","play","activeFx","hole","parts","name","split","number","fx","Fx","Number","otherFX","children","forEach","lateUpdate","dt","update"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAA2CC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,c,OAAAA,c;AAA2BC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,K,OAAAA,K;;AAC7GC,MAAAA,S;;AACEC,MAAAA,S,iBAAAA,S;;AAGFC,MAAAA,M;;;;;;;OACD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;6BAIjBY,W,WADZF,OAAO,CAAC,aAAD,C,UAQHC,QAAQ,CAAC,CAACR,IAAD,CAAD,C,UAGRQ,QAAQ,CAACR,IAAD,C,UAGRQ,QAAQ,CAACR,IAAD,C,UAGRQ,QAAQ,CAACN,MAAD,C,UAGRM,QAAQ,CAACR,IAAD,C,oCApBb,MACaS,WADb;AAAA;AAAA,kCACwD;AAEpDC,QAAAA,WAAW,GAAG;AACV;;AADU;;AAAA;;AAAA;;AAAA;;AAAA;;AAEVD,UAAAA,WAAW,CAACE,SAAZ,GAAwB,IAAxB;AACH;;AAiBSC,QAAAA,MAAM,GAAS,CACxB;;AAGMC,QAAAA,yBAAyB,GAAS;AACrC;AAAA;AAAA,sCAAUC,UAAV,CAAqBC,KAArB,GAA6BC,QAAQ,CAACC,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAD,EAA0C,EAA1C,CAArC;;AAEA,cAAI;AAAA;AAAA,sCAAUJ,UAAV,CAAqBC,KAAzB,EAAgC;AAC5B,gBAAI;AAAA;AAAA,wCAAUD,UAAV,CAAqBC,KAArB,KAA+B,CAA/B,IAAoC,CAAC;AAAA;AAAA,wCAAUD,UAAV,CAAqBK,UAA1D,IAAwE,CAAC;AAAA;AAAA,wCAAUL,UAAV,CAAqBM,SAAlG,EAA6G;AACzG;AAAA;AAAA,0CAAUN,UAAV,CAAqBK,UAArB,GAAkC,IAAlC;AACH;;AAED,gBAAI;AAAA;AAAA,wCAAUL,UAAV,CAAqBC,KAArB,KAA+B,CAA/B,IAAoC;AAAA;AAAA,wCAAUD,UAAV,CAAqBK,UAA7D,EAAyE;AACrE;AAAA;AAAA,0CAAUL,UAAV,CAAqBK,UAArB,GAAkC,KAAlC;AACH;AACJ;AACJ;;AAGDE,QAAAA,WAAW,GAAG;AACV;AAAA;AAAA,gCAAOC,OAAP,GAAiB,IAAjB;AACAnB,UAAAA,KAAK,CAAC,KAAKoB,GAAN,CAAL,CACKC,EADL,CACQ,CADR,EACW;AAAEC,YAAAA,KAAK,EAAE,IAAI1B,KAAJ,CAAU,GAAV,EAAe,GAAf,EAAoB,GAApB,EAAyB,GAAzB;AAAT,WADX,EAEK2B,IAFL,CAEU,MAAM;AACR,iBAAKC,MAAL,CAAYC,MAAZ,GAAqB,IAArB;AACH,WAJL,EAKKC,KALL;AAMH;;AAGDC,QAAAA,gBAAgB,GAAG;AACf,cAAI;AAAA;AAAA,gCAAOR,OAAX,EAAoB;AACpB,cAAI,KAAKS,UAAL,CAAgBH,MAAhB,IAA0B,IAA9B,EAAoC;AACpC,eAAKG,UAAL,CAAgBH,MAAhB,GAAyB,IAAzB;AACA,eAAKG,UAAL,CAAgBC,YAAhB,CAA6BlC,SAA7B,EAAwCmC,IAAxC,CAA6C,YAA7C;AACH;;AAGMC,QAAAA,QAAQ,CAACC,IAAD,EAAa;AACxB,gBAAMC,KAAK,GAAGD,IAAI,CAACE,IAAL,CAAUC,KAAV,CAAgB,GAAhB,CAAd;AACA,gBAAMC,MAAM,GAAGH,KAAK,CAAC,CAAD,CAApB;AAEA,gBAAMI,EAAE,GAAG,KAAKC,EAAL,CAAQC,MAAM,CAACH,MAAD,CAAN,GAAiB,CAAzB,CAAX;AACA,gBAAMI,OAAO,GAAGH,EAAE,CAACI,QAAnB;AAEAJ,UAAAA,EAAE,CAACR,YAAH,CAAgB/B,cAAhB,EAAgCgC,IAAhC;AACAU,UAAAA,OAAO,CAACE,OAAR,CAAiBL,EAAD,IAAQ;AACpBA,YAAAA,EAAE,CAACR,YAAH,CAAgB/B,cAAhB,EAAgCgC,IAAhC;AACH,WAFD;AAGH;;AAGSJ,QAAAA,KAAK,GAAS,CACpB;AACH;;AAISiB,QAAAA,UAAU,CAACC,EAAD,EAAmB,CACtC;;AAGSC,QAAAA,MAAM,CAACD,EAAD,EAAmB,CAChC;AACF;;AAtFmD,O;;;;;iBAQvC,E;;;;;;;iBAGC,I;;;;;;;iBAGK,I;;;;;;;iBAGL,I;;;;;;;iBAGC,I","sourcesContent":["\nimport { _decorator, Animation, Color, Component, Director, log, Material, Node, ParticleSystem, RigidBody, Sprite, tween, Vec3 } from 'cc';\nimport Singleton from './Singleton';\nimport { Constants } from './Constant';\nimport EventManager from './Observer/EventManager';\nimport { Ball } from '../GamePlay/Ball';\nimport Global from './Global';\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('GameManager')\nexport class GameManager extends Singleton<GameManager> {\n\n    constructor() {\n        super();\n        GameManager._instance = this;\n    }\n\n    @property([Node])\n    Fx: Node[] = [];\n\n    @property(Node)\n    guide: Node = null;\n\n    @property(Node)\n    textPraise: Node = null;\n\n    @property(Sprite)\n    CTA: Sprite = null;\n\n    @property(Node)\n    btnAll: Node = null;\n\n    protected onLoad(): void {\n    }\n\n\n    public handleMuteSoundIronSource(): void {\n        Constants.ironSource.State = parseInt(localStorage.getItem(\"cocosSoundState\"), 10)\n\n        if (Constants.ironSource.State) {\n            if (Constants.ironSource.State === 1 && !Constants.ironSource.SoundState && !Constants.ironSource.isEndGame) {\n                Constants.ironSource.SoundState = true;\n            }\n\n            if (Constants.ironSource.State === 2 && Constants.ironSource.SoundState) {\n                Constants.ironSource.SoundState = false;\n            }\n        }\n    }\n\n\n    ShowEndcard() {\n        Global.endGame = true;\n        tween(this.CTA)\n            .to(1, { color: new Color(255, 255, 255, 255) })\n            .call(() => {\n                this.btnAll.active = true;\n            })\n            .start();\n    }\n\n\n    ActiveTextPraise() {\n        if (Global.endGame) return;\n        if (this.textPraise.active == true) return;\n        this.textPraise.active = true;\n        this.textPraise.getComponent(Animation).play(\"TextPraise\");\n    }\n\n\n    public activeFx(hole: Node) {\n        const parts = hole.name.split('_');\n        const number = parts[1];\n\n        const fx = this.Fx[Number(number) - 1];\n        const otherFX = fx.children;\n\n        fx.getComponent(ParticleSystem).play();\n        otherFX.forEach((fx) => {\n            fx.getComponent(ParticleSystem).play();\n        });\n    }\n\n\n    protected start(): void {\n        //  this.ShowEndcard();\n    }\n\n\n\n    protected lateUpdate(dt: number): void {\n    }\n\n\n    protected update(dt: number): void {\n       // this.handleMuteSoundIronSource();\n    }\n}\n\n"]}