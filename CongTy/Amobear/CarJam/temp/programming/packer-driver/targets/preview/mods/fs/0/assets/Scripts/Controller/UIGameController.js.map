{"version":3,"sources":["file:///D:/CocosProjects/Amobear/CarJam/assets/Scripts/Controller/UIGameController.ts"],"names":["_decorator","Camera","Component","easing","Label","Node","tween","Vec3","GameInfo","GameController","ccclass","property","UIGameController","start","registerEvent","currentOption","scheduleOnce","isTouching","Tut_1","active","CTA_btn","on","EventType","TOUCH_START","installHandle","showCTATextContent","CTA","IsShowPopupInstall","repeatForever","to","scale","elasticOut","updateQueueLabelPos","out","wpos","QueuePopup","worldPosition","Camera3D","convertToUINode","Canvas","QueueLabel","string","String","currentQueue","node","position","x","queueLabelCalPosX","y","queueLabelCalPosY","z","update","dt","isWin","isLose"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Animation, Camera, Color, Component, easing, Event, EventTouch, Graphics, instantiate, Label, log, math, Node, Prefab, tween, Vec3 } from 'cc';\r\nimport { GameInfo } from '../Const/GameInfo';\r\nimport { SoundController } from './SoundController';\r\nimport { CONST } from '../Const/CONST';\r\nimport { GameController } from './GameController';\r\nimport { LogicGamePlay } from '../Others/HandleLogicGamePlay';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = UIGameController\r\n * DateTime = Mon Aug 26 2024 14:14:13 GMT+0700 (Indochina Time)\r\n * Author = hoanghiep2001\r\n * FileBasename = UIGameController.ts\r\n * FileBasenameNoExtension = UIGameController\r\n * URL = db://assets/Scripts/Controller/UIGameController.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\r\n *\r\n */\r\n\r\n@ccclass('UIGameController')\r\nexport class UIGameController extends Component {\r\n\r\n    @property(Camera)\r\n    Camera3D: Camera = null;\r\n\r\n    @property(GameController)\r\n    GameController: GameController = null;\r\n\r\n    @property(Node)\r\n    Canvas: Node = null;\r\n\r\n    @property(Node)\r\n    TouchArea: Node = null;\r\n\r\n    @property(Node)\r\n    QueuePopup: Node = null;\r\n\r\n    @property(Label)\r\n    QueueLabel: Label = null;\r\n\r\n    @property(Node)\r\n    Tut_1: Node = null;\r\n\r\n    @property(Node)\r\n    CTA: Node = null;\r\n\r\n    @property(Node)\r\n    CTA_btn: Node = null;\r\n\r\n\r\n    protected start(): void {\r\n        this.registerEvent();\r\n\r\n        GameInfo.currentOption !== 9 && this.scheduleOnce(() => {\r\n            if (GameInfo.isTouching) return;\r\n            this.Tut_1.active = true;\r\n        }, 2);\r\n    }\r\n\r\n\r\n    private registerEvent(): void {\r\n        // google, unity, tiktok\r\n        this.CTA_btn.on(Node.EventType.TOUCH_START, this.GameController.installHandle, this);\r\n    }\r\n\r\n\r\n    private showCTATextContent(): void {\r\n        if (this.CTA.active) return;\r\n        this.CTA.active = true;\r\n        GameInfo.IsShowPopupInstall = true;\r\n\r\n        tween(this.CTA_btn)\r\n            .repeatForever(\r\n                tween(this.CTA_btn)\r\n                    .to(0.5, { scale: new Vec3(0.5, 0.5, 0.5) })\r\n                    .to(0.5, { scale: new Vec3(0.45, 0.45, 0.45) }, { easing: easing.elasticOut })\r\n            ).start();\r\n    }\r\n\r\n\r\n    private updateQueueLabelPos(): void {\r\n        const out = new Vec3();\r\n        const wpos = this.QueuePopup.worldPosition;\r\n        this.Camera3D.convertToUINode(wpos, this.Canvas, out);\r\n        this.QueueLabel.string = String(GameInfo.currentQueue);\r\n        this.QueueLabel.node.position = new Vec3(\r\n            out.x - GameInfo.queueLabelCalPosX, out.y + GameInfo.queueLabelCalPosY, out.z\r\n        );\r\n    }\r\n\r\n\r\n    protected update(dt: number): void {\r\n        this.updateQueueLabelPos();\r\n        if ((GameInfo.isWin || GameInfo.isLose) && !GameInfo.IsShowPopupInstall) this.showCTATextContent();\r\n    }\r\n}\r\n"]}