{"version":3,"sources":["file:///D:/CocosProjects/Amobear/CarJam/assets/Scripts/Controller/GameController.ts"],"names":["_decorator","Component","SoundController","GameInfo","IronSource","ccclass","property","GameController","onFinish","window","gameEnd","start","gameReady","installHandle","console","log","isEndGame","IsShowPopupInstall","Instance","StopAllSound","playableSDK","openAppStore","ExitApi","exit","dapi","openStoreUrl","mraid","cc","sys","os","OS_ANDROID","ANDROID","open","OS_IOS","IPHONE","IPAD","install"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,e,iBAAAA,e;;AAEAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;gCAIjBO,c,WADZF,OAAO,CAAC,gBAAD,C,gBAAR,MACaE,cADb,SACoCN,SADpC,CAC8C;AAGlCO,QAAAA,QAAQ,GAAS;AACrBC,UAAAA,MAAM,CAACC,OAAP,IAAkBD,MAAM,CAACC,OAAP,EAAlB;AACH;;AAGSC,QAAAA,KAAK,GAAS;AACpBF,UAAAA,MAAM,CAACG,SAAP,IAAoBH,MAAM,CAACG,SAAP,EAApB,CADoB,CAGpB;AAEA;AACA;AACA;AAEA;AACH,SAlByC,CAqB1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGOC,QAAAA,aAAa,GAAS;AACzB;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AAEA;AAAA;AAAA,wCAAWC,SAAX,GAAuB,IAAvB;AACA;AAAA;AAAA,oCAASC,kBAAT,GAA8B,IAA9B;AACA;AAAA;AAAA,kDAAgBC,QAAhB;AAAA;AAAA,kDAA0CC,YAA1C;AACAV,UAAAA,MAAM,CAACC,OAAP,IAAkBD,MAAM,CAACC,OAAP,EAAlB,CAPyB,CASzB;;AACA,cAAI,OAAQU,WAAR,IAAwB,WAA5B,EAAyC;AACrCX,YAAAA,MAAM,CAACW,WAAP,CAAmBC,YAAnB;AACA;AACH,WAbwB,CAezB;;;AACA,cAAI,OAAQC,OAAR,IAAoB,WAAxB,EAAqC;AACjCA,YAAAA,OAAO,CAACC,IAAR;AACA;AACH,WAnBwB,CAqBzB;;;AACA,cAAI,OAAQC,IAAR,IAAiB,WAArB,EAAkC;AAC9BA,YAAAA,IAAI,CAACC,YAAL;AACA;AACH,WAzBwB,CA2BzB;;;AACA,cAAI,OAAQC,KAAR,IAAkB,WAAtB,EAAmC;AAC/B,gBAAIC,EAAE,CAACC,GAAH,CAAOC,EAAP,IAAaF,EAAE,CAACC,GAAH,CAAOE,UAApB,IAAkCH,EAAE,CAACC,GAAH,CAAOC,EAAP,IAAaF,EAAE,CAACC,GAAH,CAAOG,OAA1D,EAAmE;AAC/DL,cAAAA,KAAK,CAACM,IAAN,CAAW,iFAAX;AACA;AACH;;AAED,gBAAIL,EAAE,CAACC,GAAH,CAAOC,EAAP,IAAaF,EAAE,CAACC,GAAH,CAAOK,MAApB,IAA8BN,EAAE,CAACC,GAAH,CAAOC,EAAP,IAAaF,EAAE,CAACC,GAAH,CAAOM,MAAlD,IAA4DP,EAAE,CAACC,GAAH,CAAOC,EAAP,IAAaF,EAAE,CAACC,GAAH,CAAOO,IAApF,EAA0F;AACtFT,cAAAA,KAAK,CAACM,IAAN,CAAW,mDAAX;AACA;AACH;;AAEDN,YAAAA,KAAK,CAACM,IAAN,CAAW,iFAAX;AACA;AACH,WAzCwB,CA0CzB;;;AACAvB,UAAAA,MAAM,CAAC2B,OAAP,IAAkB3B,MAAM,CAAC2B,OAAP,EAAlB;AACH;;AA5EyC,O","sourcesContent":["import { _decorator, Component, game, log, Node, screen, view } from 'cc';\r\nimport { SoundController } from './SoundController';\r\nimport { CONST } from '../Const/CONST';\r\nimport { GameInfo } from '../Const/GameInfo';\r\nimport { IronSource } from '../AdHelper/IronSource';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n@ccclass('GameController')\r\nexport class GameController extends Component {\r\n\r\n\r\n    private onFinish(): void {\r\n        window.gameEnd && window.gameEnd();\r\n    }\r\n\r\n\r\n    protected start(): void {\r\n        window.gameReady && window.gameReady();\r\n\r\n        // this.handleOrientation();\r\n\r\n        // view.setResizeCallback(() => {\r\n        //     this.handleOrientation();\r\n        // });\r\n\r\n        // SoundController.Instance(SoundController).PlaySound(CONST.SoundTrack.bgSound);\r\n    }\r\n\r\n\r\n    // private handleOrientation(): void {\r\n    //     if (screen.windowSize.width > screen.windowSize.height) {\r\n    //         this.rotatePopup.active = false;\r\n    //         GameInfo.isCanTouch = true;\r\n    //     } else {\r\n    //         this.rotatePopup.active = true;\r\n    //         GameInfo.isCanTouch = false;\r\n    //     }\r\n    // }\r\n\r\n\r\n    public installHandle(): void {\r\n        // IronSource.handleMuteSoundIronSource();\r\n        console.log(\"install\");\r\n\r\n        IronSource.isEndGame = true;\r\n        GameInfo.IsShowPopupInstall = true;\r\n        SoundController.Instance(SoundController).StopAllSound();\r\n        window.gameEnd && window.gameEnd();\r\n\r\n        //If ad network is tiktok\r\n        if (typeof (playableSDK) != \"undefined\") {\r\n            window.playableSDK.openAppStore();\r\n            return;\r\n        }\r\n\r\n        // If ad network is google ads\r\n        if (typeof (ExitApi) != \"undefined\") {\r\n            ExitApi.exit();\r\n            return;\r\n        }\r\n\r\n        // If ad netwrok is ironsources\r\n        if (typeof (dapi) != \"undefined\") {\r\n            dapi.openStoreUrl();\r\n            return;\r\n        }\r\n\r\n        // If ad network support MRAID 2.0\r\n        if (typeof (mraid) != \"undefined\") {\r\n            if (cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.ANDROID) {\r\n                mraid.open(\"https://play.google.com/store/apps/details?id=com.bus.sort.color.car.parkingjam\");\r\n                return;\r\n            }\r\n\r\n            if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.IPHONE || cc.sys.os == cc.sys.IPAD) {\r\n                mraid.open(\"https://itunes.apple.com/us/app/id6689494845?mt=8\");\r\n                return;\r\n            }\r\n\r\n            mraid.open(\"https://play.google.com/store/apps/details?id=com.bus.sort.color.car.parkingjam\");\r\n            return;\r\n        }\r\n        // If ad network is mindwork. window alway avaiable so skip undefined check\r\n        window.install && window.install();\r\n    }\r\n\r\n\r\n}\r\n"]}