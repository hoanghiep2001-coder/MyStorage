{"version":3,"sources":["file:///D:/CocosProjects/Amobear/CarJam/assets/Scripts/Car/CarSkin.ts"],"names":["_decorator","CCString","Component","easing","Node","tween","Vec3","CarBehavior","SoundController","CONST","ccclass","property","CarSkin","start","unActiveCustomerSeats","setCarProperties","CarColor","colorCustomer","CarColorId","CarStyle","CarSeats","bounceAnim","fxBounce","play","currentScale","node","getScale","newScale","x","y","z","to","scale","smooth","activeCustomerSeat","index","isDone","Instance","PlaySound","SoundTrack","LoadCustomer","customerSeats","active","getChildByName","Happy","getComponent","handleDoneFullCustomer","customerSeatsNode","children","forEach","seat"],"mappings":"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","sourcesContent":["\nimport { _decorator, CCString, Component, easing, log, Node, ParticleSystem, tween, Vec3 } from 'cc';\nimport { CarBehavior } from './CarBehavior';\nimport { SoundController } from '../Controller/SoundController';\nimport { CONST } from '../Const/CONST';\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('CarSkin')\nexport class CarSkin extends Component {\n\n    @property(Node)\n    car_Top: Node = null;\n\n    @property(CCString)\n    CarColor: string = \"\";\n\n    @property(CCString)\n    CarStyle: string = \"\";\n\n    colorCustomer: string = null;\n\n    CarColorId: number = null;\n\n    CarSeats: number = null;\n\n    customerSeats: Node[] = [];\n\n    currentCarSeat: number = 0;\n\n    actuallySeat: number = 0;\n\n    isDone: boolean = false;\n\n    fxBounce: ParticleSystem = null;\n\n\n    protected start(): void {\n        this.unActiveCustomerSeats();\n        this.setCarProperties();\n    }\n\n\n    public setCarProperties(): void {\n        switch (this.CarColor) {\n            case \"Blue\":\n                this.colorCustomer = \"Blue\";\n                this.CarColorId = 0;\n                break;\n            case \"Green\":\n                this.colorCustomer = \"Green\";\n                this.CarColorId = 1;\n                break;\n            case \"Orange\":\n                this.colorCustomer = \"Orange\";\n                this.CarColorId = 2;\n                break;\n            case \"Pink\":\n                this.colorCustomer = \"Pink\";\n                this.CarColorId = 3;\n                break;\n            case \"Purple\":\n                this.colorCustomer = \"Purple\";\n                this.CarColorId = 4;\n                break;\n            case \"Red\":\n                this.colorCustomer = \"Red\";\n                this.CarColorId = 5;\n                break;\n            case \"Yellow\":\n                this.colorCustomer = \"Yellow\";\n                this.CarColorId = 6;\n                break;\n            case \"Blue_light\":\n                this.colorCustomer = \"Blue_light\";\n                this.CarColorId = 7;\n                break;\n            default:\n                break;\n        }\n\n        switch (this.CarStyle) {\n            case \"Car\":\n                this.CarSeats = 4;\n                break;\n            case \"Van\":\n                this.CarSeats = 6;\n                break;\n            case \"Bus\":\n                this.CarSeats = 10;\n                break;\n            default:\n                break;\n        }\n    }\n\n\n    private bounceAnim(): void {\n        this.fxBounce.play();\n        let currentScale: Vec3 = this.node.getScale(),\n            newScale: Vec3 = new Vec3(currentScale.x + 0.08, currentScale.y + 0.08, currentScale.z + 0.08);\n        tween(this.node)\n            .to(0.1, { scale: newScale }, { easing: easing.smooth })\n            .to(0.1, { scale: currentScale }, { easing: easing.smooth })\n            .start();\n    }\n\n\n    public activeCustomerSeat(index: number): void {\n        if (this.isDone) return;\n\n        SoundController.Instance(SoundController).PlaySound(CONST.SoundTrack.LoadCustomer);\n\n        this.bounceAnim();\n\n        this.customerSeats[index].active = true;\n        this.customerSeats[index].getChildByName(this.colorCustomer).active = true;\n\n        if (index + 1 === this.CarSeats) {\n            SoundController.Instance(SoundController).PlaySound(CONST.SoundTrack.Happy);\n            this.isDone = true;\n            this.getComponent(CarBehavior).handleDoneFullCustomer();\n        }\n    }\n\n\n    private unActiveCustomerSeats(): void {\n        let customerSeatsNode = this.node.getChildByName(\"CustomerSeats\")\n        this.customerSeats = customerSeatsNode.children;\n        this.customerSeats.forEach(seat => seat.active = false);\n    }\n}\n\n"]}