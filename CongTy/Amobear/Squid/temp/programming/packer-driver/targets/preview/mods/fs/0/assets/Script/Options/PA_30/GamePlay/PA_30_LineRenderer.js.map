{"version":3,"sources":["file:///D:/CocosProjects/Amobear/Squid/assets/Script/Options/PA_30/GamePlay/PA_30_LineRenderer.ts"],"names":["_decorator","Color","Component","Material","MeshRenderer","utils","Vec3","ccclass","property","PA_30_LineRenderer","type","start","points","createLine","vertices","indices","i","length","push","colors","map","mesh","createMesh","positions","v","x","y","z","reduce","acc","val","concat","c","r","g","b","a","meshRenderer","node","getComponent","lineMaterial","material","update","dt"],"mappings":"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","sourcesContent":["\nimport { _decorator, Color, Component, Material, Mesh, MeshRenderer, Node, utils, Vec3 } from 'cc';\nimport { GameInfo } from '../../../CONST/GameInfo';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = PA_30_LineRenderer\n * DateTime = Sat Dec 28 2024 16:20:04 GMT+0700 (Indochina Time)\n * Author = hoanghiep2001\n * FileBasename = PA_30_LineRenderer.ts\n * FileBasenameNoExtension = PA_30_LineRenderer\n * URL = db://assets/Script/Options/PA_30/GamePlay/PA_30_LineRenderer.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\n *\n */\n \n@ccclass('PA_30_LineRenderer')\nexport class PA_30_LineRenderer extends Component {\n    private mesh: Mesh | null = null;\n    private vertices: Vec3[] = [];\n    private indices: number[] = [];\n    private colors: Color[] = [];\n\n    @property({ type: Material })\n    lineMaterial: Material | null = null;\n\n\n    points: Vec3[] = [];\n\n\n    protected start(): void {\n        const points = [\n            new Vec3(0, 0, 0),\n            new Vec3(1, 1, 0),\n            new Vec3(2, 0, 1),\n            new Vec3(3, -1, 2),\n        ];\n\n        this.createLine(points);\n    }\n\n\n    createLine(points: Vec3[]) {\n        this.vertices = points;\n\n        // Tạo indices (mỗi 2 điểm tạo 1 đoạn thẳng)\n        this.indices = [];\n        for (let i = 0; i < points.length - 1; i++) {\n            this.indices.push(i, i + 1);\n        }\n\n        // Tạo màu cho từng điểm (tùy chọn)\n        this.colors = points.map(() => new Color(255, 255, 255, 255));\n\n        // Tạo Mesh\n        this.mesh = utils.createMesh({\n            positions: this.vertices.map(v => [v.x, v.y, v.z]).reduce((acc, val) => acc.concat(val), []),\n            colors: this.colors.map(c => [c.r / 255, c.g / 255, c.b / 255, c.a / 255]).reduce((acc, val) => acc.concat(val), []),            \n            indices: this.indices,\n        });\n\n        // Gán Mesh và Material vào MeshRenderer\n        const meshRenderer = this.node.getComponent(MeshRenderer);\n        if (meshRenderer) {\n            meshRenderer.mesh = this.mesh;\n            if (this.lineMaterial) {\n                meshRenderer.material = this.lineMaterial;\n            }\n        }\n    }\n\n\n    protected update(dt: number): void {\n        // if(GameInfo.Squid_PA_30.isDetachCandy) {\n        //     this.createLine(GameInfo.Squid_PA_30.lineRenderPoints)\n        // }\n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/decorator.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}