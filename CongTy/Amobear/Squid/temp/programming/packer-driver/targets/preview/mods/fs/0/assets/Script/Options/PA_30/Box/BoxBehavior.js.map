{"version":3,"sources":["file:///D:/CocosProjects/Amobear/Squid/assets/Script/Options/PA_30/Box/BoxBehavior.ts"],"names":["_decorator","Animation","Component","easing","Material","MeshRenderer","Node","tween","Vec3","GameInfo","ccclass","property","BoxBehavior","start","needleCollideNode","needle","children","SaoNetDut","KeoSao","getChildByName","currentDetachDuration","getComponent","clips","duration","Lines","LineContainer","index","length","element","material","Mat_ColorBlack","active","activeUnBoxAnim","play","setAnimDetachCandyState","animState","anim","currentDetachAnim","getState","resume","pause","moveDetachedCandy","Squid_PA_30","detachCandySteps","left_candy","to","position","smooth","right_candy","up_candy","isDoneAllStep","isWin","bot_candy","scheduleOnce","IsShowPopupInstall","update","dt","isDoneDrawCandy","current"],"mappings":"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","sourcesContent":["\nimport { _decorator, Animation, AnimationState, Component, easing, log, Material, MeshRenderer, Node, tween, Vec3 } from 'cc';\nimport { GameInfo } from '../../../CONST/GameInfo';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = BoxBehavior\n * DateTime = Sat Dec 28 2024 14:56:02 GMT+0700 (Indochina Time)\n * Author = hoanghiep2001\n * FileBasename = BoxBehavior.ts\n * FileBasenameNoExtension = BoxBehavior\n * URL = db://assets/Script/Options/PA_30/Box/BoxBehavior.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\n *\n */\n\n\n@ccclass('BoxBehavior')\nexport class BoxBehavior extends Component {\n\n    @property(Material)\n    Mat_ColorBlack: Material = null;\n\n    @property(Node)\n    KeoSao: Node = null;\n    SaoNetDut: Node = null;\n\n    @property(Node)\n    needle: Node = null;\n    needleCollideNode: Node = null;\n\n    @property(Node)\n    LineContainer: Node = null;\n    Lines: Node[] = [];\n\n    @property(Node)\n    left_candy: Node = null;\n    @property(Node)\n    right_candy: Node = null;\n    @property(Node)\n    up_candy: Node = null;\n    @property(Node)\n    bot_candy: Node = null;\n\n    currentDetachAnim: AnimationState = null;\n    currentDetachDuration: number = null;\n\n\n    protected start(): void {\n        this.needleCollideNode = this.needle.children[0];\n        this.SaoNetDut = this.KeoSao.getChildByName(\"SaoNetDut\");\n\n        this.currentDetachDuration = this.KeoSao.getComponent(Animation).clips[0].duration;\n\n        this.Lines = this.LineContainer.children;\n        for (let index = 0; index < this.Lines.length; index++) {\n            const element = this.Lines[index];\n            element.getComponent(MeshRenderer).material = this.Mat_ColorBlack;\n            element.active = false;\n        }\n    }\n\n\n    public activeUnBoxAnim(): void {\n        this.getComponent(Animation).play();\n    }\n\n\n    public setAnimDetachCandyState(animState: string): void {\n        const anim = this.KeoSao.getComponent(Animation);\n        switch (animState) {\n            case \"play\":\n                this.currentDetachAnim = anim.getState(\"KeoSao_Anim\");\n                anim.play();\n                break;\n            case \"resume\":\n                anim.resume();\n                break;\n            case \"pause\":\n                anim.pause();\n                break;\n            default:\n                break;\n        }\n    }\n\n\n    public moveDetachedCandy(): void {\n        switch (GameInfo.Squid_PA_30.detachCandySteps) {\n            case 1:\n                tween(this.left_candy)\n                    .to(0.2, { position: new Vec3(0.37, -0.383, 0) }, { easing: easing.smooth })\n                    .start();\n                break;\n            case 2:\n                tween(this.right_candy)\n                    .to(0.2, { position: new Vec3(-0.377, -0.312, 0) }, { easing: easing.smooth })\n                    .start();\n                break;\n            case 3:\n                tween(this.up_candy)\n                    .to(0.2, { position: new Vec3(-0.389, 0.486, 0) }, { easing: easing.smooth })\n                    .start();\n                break;\n            case 4:\n                GameInfo.Squid_PA_30.isDoneAllStep = true;\n                GameInfo.isWin = true;\n\n                tween(this.bot_candy)\n                    .to(0.2, { position: new Vec3(0.416, 0.368, 0) }, { easing: easing.smooth })\n                    .start();\n\n                    this.scheduleOnce(() => GameInfo.IsShowPopupInstall = true, 2);\n                break;\n            default:\n                break;\n        }\n    }\n\n\n    protected update(dt: number): void {\n        if (this.currentDetachAnim && !GameInfo.Squid_PA_30.isDoneDrawCandy) {\n            if (this.currentDetachAnim.current >= 10) {\n                GameInfo.Squid_PA_30.isDoneDrawCandy = true;\n                this.SaoNetDut.active = false;\n            };\n        }\n    }\n}\n\n"]}