{"version":3,"sources":["file:///D:/CocosProjects/Amobear/GTA_All/assets/scripts/Others/Responsive.ts"],"names":["_decorator","Component","screen","GameInfo","ccclass","property","Responsive","start","handleRotate","windowSize","width","height","isRotate","setHorizontal","setVertical","setHorizontalForIpX","setHorizontalForTablet","HORIZONTAL_IPX","device","responsiveUIs","forEach","item","Node","setPosition","Position","setScale","Scale","HORIZONTAL_TABLET","setIphoneX","setMobile","VERTICAL_IPX","VERTICAL_MOBILE","update","dt"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, screen } from 'cc';\nimport * as Interfaces from \"../CONST/interfaces\";\nimport { GameInfo } from '../CONST/GameInfo';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Responsive')\nexport class Responsive extends Component {\n\n    responsiveUIs: Interfaces.responsiveItem[] = []; \n\n    device: string = \"\";\n    isRotate: boolean = false;\n\n    HORIZONTAL_IPX: string = \"horizontal_IPX\";\n    HORIZONTAL_TABLET: string = \"horizontal_Tablet\";\n    VERTICAL_IPX: string = \"vertical_IPX\";\n    VERTICAL_MOBILE: string = \"vertical_Mobile\";\n\n\n    protected start(): void {\n        this.handleRotate();\n    }\n\n\n    private handleRotate(): void {\n        if (screen.windowSize.width > screen.windowSize.height) {\n            GameInfo.isRotate = true;\n            this.isRotate = true;\n            this.setHorizontal();\n        } else {\n            GameInfo.isRotate = false;\n            this.isRotate = false;\n            this.setVertical();\n        }\n    }\n\n\n    private setHorizontal(): void {\n        if (screen.windowSize.height / screen.windowSize.width < 0.65) {\n            // Iphone 6 / 6 plus / 7 / 7 Plus / X\n            this.setHorizontalForIpX();\n        } else {\n            this.setHorizontalForTablet();\n        }\n    }\n\n\n    private setHorizontalForIpX(): void {\n        if (this.HORIZONTAL_IPX === this.device) {\n            return;\n        }\n\n        this.device = this.HORIZONTAL_IPX;\n\n        // IP X\n        if (screen.windowSize.height / screen.windowSize.width < 0.47) {\n            this.responsiveUIs.forEach(item => {\n                item.Node.setPosition(item.Position);\n                item.Node.setScale(item.Scale);\n            });\n        }\n\n        // IP 6 / 7 / 8\n        else {\n            this.responsiveUIs.forEach(item => {\n                item.Node.setPosition(item.Position);\n                item.Node.setScale(item.Scale);\n            });\n        }\n    }\n\n\n    private setHorizontalForTablet(): void {\n        if (this.HORIZONTAL_TABLET === this.device) {\n            return;\n        }\n\n        this.device = this.HORIZONTAL_TABLET;\n\n        this.responsiveUIs.forEach(item => {\n            item.Node.setPosition(item.Position);\n            item.Node.setScale(item.Scale);\n        });\n        // if (screen.windowSize.width / screen.windowSize.height < 0.7) {\n\n        //     // Iphone 6 / 6 plus / 7 / 7 Plus\n\n        // } else {    \n\n        //     // Ipad\n        // }\n\n    }\n\n\n    private setVertical(): void {\n        if (screen.windowSize.width / screen.windowSize.height < 0.5) {\n            this.setIphoneX();\n        } else {\n            this.setMobile();\n        }\n    }\n\n    private setIphoneX(): void {\n        if (this.VERTICAL_IPX === this.device) {\n            return;\n        }\n\n        this.device = this.VERTICAL_IPX;\n        \n        this.responsiveUIs.forEach(item => {\n            item.Node.setPosition(item.Position);\n            item.Node.setScale(item.Scale);\n        });\n    }\n\n\n    private setMobile(): void {\n        if (this.VERTICAL_MOBILE === this.device) {\n            return;\n        }\n\n        this.device = this.VERTICAL_MOBILE;\n\n        let width = screen.windowSize.width;\n        let height = screen.windowSize.height;\n\n        if (height / width > 1.5) {\n            // if (width / height >= 0.6 && width / height < 0.62) {\n            //     // mobile mode applovin\n\n            //     return;\n            // }\n\n            // Iphone 6 / 6 Plus / 7 / 7 Plus   \n            this.responsiveUIs.forEach(item => {\n                item.Node.setPosition(item.Position);\n                item.Node.setScale(item.Scale);\n            });\n        } else {\n            this.responsiveUIs.forEach(item => {\n                item.Node.setPosition(item.Position);\n                item.Node.setScale(item.Scale);\n            });\n        }\n\n        // if (screen.windowSize.width / screen.windowSize.height < 0.7) {\n        //     // Iphone 6 / 6 plus / 7 / 7 Plus\n\n        // } else {\n        //     // Ipad\n        // }\n    }\n\n\n    protected update(dt: number): void {\n        this.handleRotate();\n    }\n\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/decorator.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}