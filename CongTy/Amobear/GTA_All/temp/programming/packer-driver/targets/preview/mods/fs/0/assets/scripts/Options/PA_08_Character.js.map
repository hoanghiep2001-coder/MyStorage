{"version":3,"sources":["file:///U:/CocosProjects/PA/GTA3_PlayableAds/GTA_All/assets/scripts/Options/PA_08_Character.ts"],"names":["_decorator","Collider","Component","Node","RigidBody","Quat","Vec3","tween","easing","GameInfo","ccclass","property","PA_08_Character","start","rigidbody","getComponent","currentPos","node","getPosition","_collider","on","target","otherCollider","name","console","log","checkPoint_1","active","move","movingCount","setPosition","x","y","z","targetToTurnStep","GTA_PA_08","isHitBrakeBtn","isTouchCheckPointFlag","handleGoToCheckpoint_2","isGotoPoint2Flag","to","eulerAngles","position","checkPoint_2","smooth","update","dt","isHitDogeCopsBtn"],"mappings":"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","sourcesContent":["import { _decorator, Collider, Component, Node, ITriggerEvent, RigidBody, Quat,  math, Vec3, log, ICollisionEvent, tween, easing } from 'cc';\nimport { GameInfo } from '../CONST/GameInfo';\nimport { SoundController } from '../Controller/SoundController';\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('PA_08_Character')\nexport class PA_08_Character extends Component {\n\n    @property(Node)\n    checkPoint_1: Node = null;\n\n    @property(Node)\n    checkPoint_2: Node = null;\n\n    rigidbody: RigidBody = null;\n\n    isCanMove: boolean = false;\n    speed: number = 50;\n    currentPos: Vec3 = null;\n    _collider: Collider = null;\n    movingCount: number = 0;\n\n    targetToTurnStep: number = 136;\n\n\n    targetQuat: Quat = new Quat();\n    currentQuat: Quat = new Quat();\n    isGotoPoint2Flag: boolean = false;\n\n\n    protected start(): void {\n        this.rigidbody = this.getComponent(RigidBody);\n        this.currentPos = this.node.getPosition();\n\n        this._collider = this.getComponent(Collider);\n        this._collider.on('onTriggerEnter', (target: ITriggerEvent) => {\n            if (target.otherCollider.node.name == 'Checkpoint Collider_1') {\n                console.log(\"Check point!\");\n                this.checkPoint_1.active = false;\n            }\n        });\n    }\n\n\n    private move(): void {\n        this.movingCount += 1;\n      \n        // this.rigidbody.setLinearVelocity(new Vec3(0, 0, this.speed));\n        this.currentPos = this.node.getPosition();\n        this.node.setPosition(this.currentPos.x, this.currentPos.y, this.currentPos.z + 0.3);\n\n        if(this.movingCount >= this.targetToTurnStep) {\n            GameInfo.GTA_PA_08.isHitBrakeBtn = false;\n            this.checkPoint_1.active = false;\n            GameInfo.GTA_PA_08.isTouchCheckPointFlag = true;\n            // this.handleGoToCheckpoint_2();\n        }\n\n    }\n\n\n    private handleGoToCheckpoint_2(): void {\n        if(this.isGotoPoint2Flag) return;\n\n        this.isGotoPoint2Flag = true;\n\n        tween(this.node)\n        .to(0.8, {eulerAngles: new Vec3(0, -90, 0), position: this.checkPoint_2.position}, {easing: easing.smooth})\n        .start();\n    }\n\n\n    protected update(dt: number): void {\n        GameInfo.GTA_PA_08.isHitBrakeBtn && this.move();\n        GameInfo.GTA_PA_08.isHitDogeCopsBtn && this.handleGoToCheckpoint_2();\n        // this.currentPos = this.node.getPosition();\n        // this.node.setPosition(this.currentPos.x, this.currentPos.y, this.currentPos.z + 0.2);\n        // this.isCanMove = true;\n\n    }\n}\n\n"]}