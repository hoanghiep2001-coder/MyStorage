{"version":3,"sources":["file:///D:/CocosProjects/Amobear/GTA_All/assets/scripts/Options/PA_11/PA_11_UI.ts"],"names":["_decorator","Camera","Component","easing","Node","sp","tween","Vec3","GameInfo","SoundController","ccclass","property","PA_11_UI","Skeleton","start","Aim_originPos","Aim","getPosition","setAimOriginPos","setPosition","activeSpineCombo","Spine_Combo","node","active","_defaultSkinIndex","GTA_PA_11","currentEnemyKilled","setAnimation","activeCTA","isShowCTA","UI_Blink","CTA","lightning_FX","Instance","stopAllSound","handleRotateCamera","isActiveRotateCamera","Text_MoreEnemy","newPos","newRotateEuleurs","isCanTouch","Health","MainCam","to","position","eulerAngles","smooth","call","isDoneRotateCamera","update","dt","isShowInstallPopup"],"mappings":"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","sourcesContent":["import { _decorator, Camera, Component, Director, director, easing, Game, game, Node, ParticleSystem, Skeleton, sp, tween, Vec3 } from 'cc';\nimport { GameInfo } from '../../CONST/GameInfo';\nimport { SoundController } from '../../Controller/SoundController';\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('PA_11_UI')\nexport class PA_11_UI extends Component {\n\n    isActiveRotateCamera: boolean = false;\n    @property(Camera)\n    MainCam: Camera = null;\n\n    @property(Node)\n    Aim: Node = null;\n\n    @property(sp.Skeleton)\n    Spine_Combo: sp.Skeleton = null;\n\n\n    @property([Node])\n    tutorials: Node[] = [];\n\n    @property(Node)\n    lightning_FX: Node = null;\n\n    @property(Node)\n    Text_MoreEnemy: Node = null;\n\n    // @property([Node])\n    // Grimaces: Node[] = [];\n    // @property([ParticleSystem])\n    // explosionFXs: ParticleSystem[] = [];\n\n\n    Aim_originPos: Vec3 = null;\n\n    @property(Node)\n    UI_Blink: Node = null;\n\n    @property(Node)\n    Health: Node = null;\n\n    isShowCTA: boolean = false;\n    @property(Node)\n    CTA: Node = null;\n\n\n    protected start(): void {\n        this.Aim_originPos = this.Aim.getPosition();\n    }\n\n\n    public setAimOriginPos(): void {\n        this.Aim.setPosition(this.Aim_originPos);\n    }\n\n\n    public activeSpineCombo(): void {\n        this.Spine_Combo.node.active = true;\n        this.Spine_Combo._defaultSkinIndex = GameInfo.GTA_PA_11.currentEnemyKilled - 1;\n        this.Spine_Combo.setAnimation(0, \"action\", false);\n    }\n\n    \n\n    private activeCTA(): void {\n        this.isShowCTA = true;\n        this.UI_Blink.active = true;\n        this.Aim.active = false;\n        this.CTA.active = true;\n        this.lightning_FX.active = false;\n\n        SoundController.Instance(SoundController).stopAllSound();\n    }\n\n\n    private handleRotateCamera(): void {\n        this.isActiveRotateCamera = true;\n\n        this.Text_MoreEnemy.active = true;\n\n        const newPos = new Vec3(657.569, 22.552, -145.062);\n        const newRotateEuleurs = new Vec3(-15, 213.141, 0);\n\n        GameInfo.isCanTouch = false;\n\n        this.Health.active = true;\n\n        tween(this.MainCam.node)\n        .to(1.5, {position: newPos, eulerAngles: newRotateEuleurs}, {easing: easing.smooth})\n        .call(() => {\n            GameInfo.GTA_PA_11.isDoneRotateCamera = true;\n        })\n        .start();\n    }\n\n\n    protected update(dt: number): void {\n        GameInfo.GTA_PA_11.currentEnemyKilled >= 2 && !this.isActiveRotateCamera && this.handleRotateCamera();\n        GameInfo.GTA_PA_11.isShowInstallPopup && !this.isShowCTA && this.activeCTA();\n    }\n\n}\n\n\n"]}