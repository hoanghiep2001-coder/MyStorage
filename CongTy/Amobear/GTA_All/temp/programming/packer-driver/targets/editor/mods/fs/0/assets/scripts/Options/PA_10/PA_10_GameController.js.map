{"version":3,"sources":["file:///D:/CocosProjects/Amobear/GTA_All/assets/scripts/Options/PA_10/PA_10_GameController.ts"],"names":["_decorator","Component","Director","GameInfo","ccclass","property","getOrCreateSlomoPolyfill","polyfill","polyfill_","multiplier","tick","prototype","dt","args","call","PA_10_GameController","start","activeSlowMotion","isActiveSlomotion","slowMotionEffect","StartSlowMotionRate","update","GTA_PA_10","currentEnemyKilled","isShowInstallPopup"],"mappings":";;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;;AAEvBC,MAAAA,Q,iBAAAA,Q;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEMM,MAAAA,wB,GAA2B,CAAC,MAAM;AACpC,YAAIC,QAAJ;AAEA,eAAO,MAAM;AACT,cAAI,CAACA,QAAL,EAAe;AACX,kBAAMC,SAAS,GAAG;AAAEC,cAAAA,UAAU,EAAE;AAAd,aAAlB;AACA,kBAAMC,IAAI,GAAGR,QAAQ,CAACS,SAAT,CAAmBD,IAAhC;;AACAR,YAAAA,QAAQ,CAACS,SAAT,CAAmBD,IAAnB,GAA0B,UAAUE,EAAV,EAAsB,GAAGC,IAAzB,EAA+B;AACrDH,cAAAA,IAAI,CAACI,IAAL,CAAU,IAAV,EAAgBF,EAAE,GAAGJ,SAAS,CAACC,UAA/B,EAA2C,GAAGI,IAA9C;AACH,aAFD;;AAGAN,YAAAA,QAAQ,GAAGC,SAAX;AACH;;AACD,iBAAOD,QAAP;AACH,SAVD;AAWH,OAdgC,G;;sCAkBpBQ,oB,WADZX,OAAO,CAAC,sBAAD,C,yBAAR,MACaW,oBADb,SAC0Cd,SAD1C,CACoD;AAAA;AAAA;;AAAA,uDAGlB,GAHkB;;AAAA,qDAKnB,KALmB;AAAA;;AAQtCe,QAAAA,KAAK,GAAS,CAEpB;AAEA;AACA;AACA;AACA;AACH;;AAGOC,QAAAA,gBAAgB,GAAS;AAC7B,cAAI,KAAKC,iBAAT,EAA4B;AAC5B,eAAKA,iBAAL,GAAyB,IAAzB;AACA,eAAKC,gBAAL,CAAsB,KAAKC,mBAA3B;AACH;;AAGOD,QAAAA,gBAAgB,CAACV,UAAD,EAA2B;AAC/CH,UAAAA,wBAAwB,GAAGG,UAA3B,GAAwCA,UAAxC;AACH;;AAGSY,QAAAA,MAAM,CAACT,EAAD,EAAmB;AAC/B,cAAI;AAAA;AAAA,oCAASU,SAAT,CAAmBC,kBAAnB,IAAyC,CAAzC,IAA8C,CAAC;AAAA;AAAA,oCAASD,SAAT,CAAmBE,kBAAtE,EAA0F;AACtF,iBAAKP,gBAAL;;AACA,gBAAI,KAAKG,mBAAL,IAA4B,CAAhC,EAAmC;AAC/B;AAAA;AAAA,wCAASE,SAAT,CAAmBE,kBAAnB,GAAwC,IAAxC;AACA;AACH;;AACD,iBAAKL,gBAAL,CAAsB,KAAKC,mBAAL,IAA4B,MAAlD;AACH;AAEJ;;AAzC+C,O;AA6CpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\nimport { _decorator, Component, Director, director, Game, game, log, Node, view } from 'cc';\nimport { SoundController } from '../../Controller/SoundController';\nimport { GameInfo } from '../../CONST/GameInfo';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = PA_10_UI\n * DateTime = Wed Dec 25 2024 09:20:50 GMT+0700 (Indochina Time)\n * Author = hoanghiep2001\n * FileBasename = PA_10_UI.ts\n * FileBasenameNoExtension = PA_10_UI\n * URL = db://assets/scripts/Options/PA_10/PA_10_UI.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\n *\n */\n\nconst getOrCreateSlomoPolyfill = (() => {\n    let polyfill: undefined | { multiplier: number; };\n\n    return () => {\n        if (!polyfill) {\n            const polyfill_ = { multiplier: 1.0 };\n            const tick = Director.prototype.tick;\n            Director.prototype.tick = function (dt: number, ...args) {\n                tick.call(this, dt * polyfill_.multiplier, ...args);\n            };\n            polyfill = polyfill_;\n        }\n        return polyfill;\n    };\n})();\n\n\n@ccclass('PA_10_GameController')\nexport class PA_10_GameController extends Component {\n\n\n    StartSlowMotionRate: number = 0.3;\n\n    isActiveSlomotion: boolean = false;\n\n\n    protected start(): void {\n\n        // SoundController.Instance(SoundController).playSound(\"WarSfx\");\n\n        // this.schedule(() => {\n        //     if(GameInfo.GTA_PA_10.currentEnemyKilled >= 2) return;\n        //     SoundController.Instance(SoundController).playSound(\"BulletHittRock\");\n        // }, 2)\n    }\n\n\n    private activeSlowMotion(): void {\n        if (this.isActiveSlomotion) return;\n        this.isActiveSlomotion = true;\n        this.slowMotionEffect(this.StartSlowMotionRate);\n    }\n\n\n    private slowMotionEffect(multiplier: number): void {\n        getOrCreateSlomoPolyfill().multiplier = multiplier;\n    }\n\n\n    protected update(dt: number): void {\n        if (GameInfo.GTA_PA_10.currentEnemyKilled >= 2 && !GameInfo.GTA_PA_10.isShowInstallPopup) {\n            this.activeSlowMotion();\n            if (this.StartSlowMotionRate >= 1) {\n                GameInfo.GTA_PA_10.isShowInstallPopup = true;\n                return;\n            }\n            this.slowMotionEffect(this.StartSlowMotionRate += 0.0036)\n        }\n\n    }\n\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/decorator.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}